import{cq as M,cu as Q,cD as W,id as j,ie as E,ig as ee,ih as te,ii as ne,cH as oe,ij as se,ik as ae,il as ie,o as v,a as N,aR as L,q as x,d as B,im as A,c as g,aX as le,g as ce,u as s,db as k,io as V,m as w,f as C,e as T,F as re,ip as ue,b as pe,w as S,ap as de,aU as me,ay as _e,as as fe}from"./index-ae08633e.js";import{_ as he,a as ge,N as ve,d as F,M as Ce}from"./SearchableSelect.vue_vue_type_script_setup_true_lang-bbf6b024.js";import{_ as Ne}from"./Input-f45efe32.js";import{_ as be}from"./InputNumber-5c057b81.js";import{_ as xe}from"./Select-cb458b1f.js";import{N as we}from"./Switch-60e217a6.js";import{_ as ke}from"./Checkbox-7c7439a1.js";import{N as Le}from"./Popover-076f5b40.js";import{N as Pe}from"./text-28bcf2c3.js";import{_ as y}from"./Tag-7174413f.js";import{b as $e,c as R,t as Se}from"./get-a45cbf41.js";import{_ as ye}from"./DataTable-81a1d2c0.js";import{N as Be}from"./Popconfirm-1b04dd75.js";var D=M?M.isConcatSpreadable:void 0;function Oe(e){return Q(e)||W(e)||!!(D&&e&&e[D])}function q(e,t,o,i,a){var r=-1,_=e.length;for(o||(o=Oe),a||(a=[]);++r<_;){var f=e[r];t>0&&o(f)?t>1?q(f,t-1,o,i,a):j(a,f):i||(a[a.length]=f)}return a}function Ie(e){var t=e==null?0:e.length;return t?q(e,1):[]}function Me(e){return E(ee(e,void 0,Ie),e+"")}function Ve(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Te(e,t){return t.length<2?e:$e(e,te(t,0,-1))}function Fe(e,t){return t=R(t,e),e=Te(e,t),e==null||delete e[Se(Ve(t))]}function De(e){return ne(e)?void 0:e}var Ue=1,Ae=2,Re=4,qe=Me(function(e,t){var o={};if(e==null)return o;var i=!1;t=oe(t,function(r){return r=R(r,e),i||(i=r.length>1),r}),se(e,ae(e),o),i&&(o=ie(o,Ue|Ae|Re,De));for(var a=t.length;a--;)Fe(o,t[a]);return o});const U=qe;function kt(e,t,o){e[t]=o}function Lt(e,t){return e[t]}function Pt(e){const t=Object.create(null);for(const[o,i]of e)t[o]=i;return t}const Ge={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ze=L("path",{fill:"currentColor",d:"M10 22L0 12L10 2l1.775 1.775L3.55 12l8.225 8.225L10 22Z"},null,-1),He=[Ze];function Ke(e,t){return v(),N("svg",Ge,He)}const $t={name:"material-symbols-arrow-back-ios",render:Ke},Xe={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ye=L("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"},null,-1),ze=[Ye];function Je(e,t){return v(),N("svg",Xe,ze)}const Qe={name:"mdi-close",render:Je},We={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},je=L("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"},null,-1),Ee=[je];function et(e,t){return v(),N("svg",We,Ee)}const tt={name:"mdi-check",render:et},nt={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},ot=L("path",{fill:"currentColor",d:"M5 3c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7h-2v7H5V5h7V3H5m12.78 1a.69.69 0 0 0-.48.2l-1.22 1.21l2.5 2.5L19.8 6.7c.26-.26.26-.7 0-.95L18.25 4.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L8 13.5V16h2.5l7.37-7.38l-2.5-2.5Z"},null,-1),st=[ot];function at(e,t){return v(),N("svg",nt,st)}const it={name:"mdi-square-edit-outline",render:at};var G=(e=>(e.NInput="on-input",e.NInputNumber="on-update:value",e.NSelect="on-update:value",e.SearchableSelect="onUpdate:value",e.NSwitch="on-update:value",e.NCheckbox="on-update:value",e.NDatePicker="on-update:value",e.NTimePicker="on-update:value",e))(G||{});const m=new Map;m.set("NInput",Ne);m.set("NInputNumber",be);m.set("NSelect",xe);m.set("SearchableSelect",he);m.set("NSwitch",we);m.set("NCheckbox",ke);m.set("NDatePicker",ge);m.set("NTimePicker",ve);const lt=({component:e="NInput",rule:t=!0,ruleMessage:o="",popoverVisible:i=!1},{attrs:a})=>{const r=m.get(e),_=x(r,a);return t?x(Le,{"display-directive":"show",show:Boolean(i),manual:"manual"},{trigger:()=>_,default:()=>x("span",{style:{color:"red",width:"90px",display:"inline-block"}},{default:()=>o})}):_},O=new Map;O.set("NText",Pe);O.set("NTag",y);const ct=({component:e="NText",text:t},{attrs:o})=>{const i=O.get(e);return x(i,o,{default:()=>t})},rt=B({name:"EditableCell"}),St=B({...rt,props:{data:{default:""},preUnit:{default:""},suffixUnit:{default:""},showComponent:{default:"NText"},showComponentProps:{default:()=>({})},editComponent:{default:"NInput"},editComponentProps:{default:()=>({})}},emits:["update:data"],setup(e,{emit:t}){const o=e,i=A(),a=g({get(){return o.data},set(n){t("update:data",n)}}),{bool:r,setTrue:_,setFalse:f}=le(),u=ce(o.data),b={...o.editComponentProps},h=g(()=>o.editComponent||"NInput"),P=g(()=>["NCheckbox","NRadio"].includes(s(h)));function I(){u.value=a.value,_()}function Z(){var n;u.value=a.value,f(),(n=window.$message)==null||n.info("cancelInput")}function $(n){var p;if(!n.includes("Select"))return[];let l=i.options??[];return n==="SearchableSelect"&&(l=((p=b.options)==null?void 0:p.length)>0?b.options:l),l}const H=g(()=>{let n=o.showComponentProps??{};const l=s(h);if(l.includes("Select")){const c=$(l).find(d=>`${d.value}`==`${a.value}`);n={...n,...c}}return{...n}}),K=g(()=>{const n=s(a),l=s(h);if(l==="NDatePicker"&&k(n))return F(n);if(!l.includes("Select"))return n;const c=$(l).find(d=>`${d.value}`==`${n}`);return(c==null?void 0:c.label)??n});function X(){if(Object.hasOwn(o.editComponentProps,"onUpdateOption")){const n=s(h),p=$(n).find(d=>`${d.value}`==`${u.value}`),c=o.editComponentProps.onUpdateOption;c(p??{})}a.value=u.value,f()}async function Y(n){const l=s(h),p=o.editComponentProps??{};n?n!=null&&n.target&&Reflect.has(n.target,"value")?u.value=n.target.value:l==="NCheckbox"?u.value=n.target.checked:l==="SearchableSelect"?(u.value=n.value,b.options=Ce(b.options,n.option)):(ue(n)||V(n)||k(n))&&(u.value=n):u.value=n,l==="NDatePicker"&&k(u.value)&&p.valueFormat&&(u.value=F(u.value))}const z=g(()=>{const n=o.editComponentProps??{},l=s(P),p=l?"checked":"value",c=s(u),d=l?k(c)&&V(c)?c:Boolean(c):c,J=o.editComponent??null?G[o.editComponent]:void 0;return{...U(i,"class","style"),...U(n,"onChange"),[J]:Y,[p]:d}});return(n,l)=>{const p=it,c=tt,d=Qe;return v(),N(re,null,[s(r)?T("",!0):(v(),N("div",w({key:0},s(i),{class:"flex-center"}),[C(s(ct),w({text:o.preUnit+s(K)+o.suffixUnit,component:o.showComponent},s(H),{onClick:I}),null,16,["text","component"]),C(p,{class:"text-15px ml-20px",onClick:I})],16)),s(r)?(v(),N("div",w({key:1},s(i),{class:"flex-center"}),[C(s(lt),w({component:s(h),"popover-visible":!1,style:{width:"70%"}},s(z)),null,16,["component"]),C(c,{class:"text-20px ml-10px",onClick:X}),C(d,{class:"text-20px ml-10px",onClick:Z})],16)):T("",!0)],64)}}}),ut=[{key:"propLabel",title:"变更属性",align:"center"},{key:"oldValueLabel",title:"原有值",align:"center",render:e=>x(y,{bordered:!1},{default:()=>e.oldValueLabel})},{key:"newValueLabel",title:"变更值",align:"center",ellipsis:{tooltip:!0},render:e=>x(y,{bordered:!1,type:"success"},{default:()=>e.newValueLabel})}],yt=B({__name:"index",props:{data:null},emits:["positive-click"],setup(e,{emit:t}){const o=e,i=A(),a=g(()=>o.data),r=g(()=>a.value.length!==0);function _(){t("positive-click")}return(f,u)=>{const b=fe,h=ye,P=Be;return v(),pe(P,w(s(i),{"show-icon":!1,onPositiveClick:_}),{trigger:S(()=>[de(C(b,{class:"w-100px",type:"info"},{default:S(()=>[me("提交修改")]),_:1},512),[[_e,s(r)]])]),default:S(()=>[C(h,{class:"max-w-500px",columns:s(ut),data:s(a)},null,8,["columns","data"])]),_:1},16)}}});export{Pt as M,yt as _,St as a,$t as b,Lt as g,kt as s};
