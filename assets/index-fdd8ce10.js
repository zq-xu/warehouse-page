import{iA as A,iB as C,d as D,aY as I,r as U,c as O,as as B,av as q,aw as s,aB as a,ax as n,aD as p,aC as i,az as d,ao as k,bk as F,df as J}from"./index-d34e0519.js";import{_ as L,a as R,b as _,s as T}from"./index.vue_vue_type_script_setup_true_lang-21655c41.js";import{d as V}from"./time-0f38da99.js";import{C as j}from"./difference-a6ec943c.js";import{c as w}from"./customer-0c718fe8.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-b113ef98.js";import{N as Y}from"./Space-b4b83a0d.js";import{_ as E,a as G}from"./DescriptionsItem-f5b97799.js";import{_ as H}from"./Tag-1e615c64.js";import{_ as K,a as M}from"./Tabs-b311b687.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-b25c0716.js";import"./Select-ed1484d1.js";import"./use-merged-state-38e48ef5.js";import"./Suffix-82265be2.js";import"./use-compitable-c9ad10e0.js";import"./cssr-bdc68017.js";import"./Popover-7a5e5188.js";import"./get-0596a638.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./DatePicker-bc839373.js";import"./Dropdown-07d5487b.js";import"./DataTable-5dd479e1.js";import"./Checkbox-5d323e84.js";import"./Input-5a80c108.js";import"./InputNumber-f672dc0a.js";import"./Add-b172a4da.js";import"./Switch-ad10093b.js";import"./text-92e19e0a.js";import"./ListTable.vue_vue_type_script_setup_true_lang-6f3668cb.js";import"./refresh-8a8ec83d.js";import"./use-loading-f04b65e1.js";import"./vuedraggable.umd-510056e9.js";import"./Popconfirm-ab3b5a82.js";const y={...A},Q=[...C],Oe=D({__name:"index",setup(W){const v=I(),o=U({}),g=O(()=>{var r,t;return J((r=o.value)==null?void 0:r.createdAt)?V((t=o.value)==null?void 0:t.createdAt):""}),f=new j;function c(r,t){const u=o.value[r];T(o.value,r,t),f.updateProp({key:r,oldValue:u,newValue:t,propOptions:Q})}async function h(){var t,u;const{error:r}=await w.update(o.value.id,f.generateChangedRecord());r?(t=window.$message)==null||t.error(`${p("warehouse.common.operateFailed")} ${r.msg}`):((u=window.$message)==null||u.success(p("warehouse.common.editSuccess")),setTimeout(()=>{k().reloadPage()},500))}async function x(){var u;const r=(u=v.query)==null?void 0:u.id,{data:t}=await w.get(r);o.value=JSON.parse(JSON.stringify(t))}return x(),(r,t)=>{const u=Y,m=E,b=H,P=G,$=K,N=M,S=F;return B(),q(S,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:s(()=>[a(u,{class:"pb-12px",justify:"space-between"},{default:s(()=>[a(L,{"last-path":"warehouse_customer"}),a(R,{class:"max-w-500px",data:n(f).changedData.value,onPositiveClick:h},null,8,["data"])]),_:1}),a(P,{columns:6,"label-placement":"left",class:"text-center",bordered:""},{default:s(()=>[a(m,{span:2,label:n(p)("warehouse.property.name")},{default:s(()=>{var e;return[i(d((e=o.value)==null?void 0:e.name),1)]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.phone")},{default:s(()=>{var e;return[a(_,{"edit-component":"NInput",data:(e=o.value)==null?void 0:e.phone,"onUpdate:data":t[0]||(t[0]=l=>c("phone",l))},null,8,["data"])]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.address")},{default:s(()=>{var e;return[a(_,{data:(e=o.value)==null?void 0:e.address,"onUpdate:data":t[1]||(t[1]=l=>c("address",l))},null,8,["data"])]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.totalPaid")+"/"+n(p)("warehouse.property.totalPrice")},{default:s(()=>[a(b,{type:"success"},{default:s(()=>{var e;return[i("€"+d((e=o.value)==null?void 0:e.totalPaid),1)]}),_:1}),i(" / "),a(b,{type:"primary"},{default:s(()=>{var e;return[i("€"+d((e=o.value)==null?void 0:e.totalPrice),1)]}),_:1})]),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.status")},{default:s(()=>{var e;return[a(b,{type:n(y)[((e=o.value)==null?void 0:e.status)||"1"].type},{default:s(()=>{var l;return[i(d(n(y)[((l=o.value)==null?void 0:l.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.createdAt")},{default:s(()=>[i(d(g.value),1)]),_:1},8,["label"]),a(m,{span:6,label:n(p)("warehouse.property.invoiceInfo"),"content-style":{textAlign:"left",whiteSpace:"pre-wrap"}},{default:s(()=>{var e;return[a(_,{"edit-component":"NInput","edit-component-props":{type:"textarea"},data:(e=o.value)==null?void 0:e.invoiceInfo,"onUpdate:data":t[2]||(t[2]=l=>c("invoiceInfo",l))},null,8,["data"])]}),_:1},8,["label"]),a(m,{span:6,label:n(p)("warehouse.property.comment")},{default:s(()=>{var e;return[a(_,{data:(e=o.value)==null?void 0:e.comment,"onUpdate:data":t[3]||(t[3]=l=>c("comment",l))},null,8,["data"])]}),_:1},8,["label"])]),_:1}),a(N,{type:"line",animated:""},{default:s(()=>[a($,{name:"order",tab:n(p)("warehouse.order.tittle")},{default:s(()=>{var e;return[a(z,{"query-map":{customerId:(e=o.value)==null?void 0:e.id}},null,8,["query-map"])]}),_:1},8,["tab"])]),_:1})]),_:1})}}});export{Oe as default};
