var V=Object.defineProperty;var b=(r,e,a)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a;var u=(r,e,a)=>(b(r,typeof e!="symbol"?e+"":e,a),a);import{g as v,iq as D}from"./index-2cfb8be3.js";import{g}from"./index.vue_vue_type_script_setup_true_lang-492d9acd.js";class m{constructor(){u(this,"changedData",v([]));u(this,"updateProp",e=>{this.mergeChanegdData(this.compProp(e))});u(this,"updateObj",(e,a,l)=>{for(const t in a)if((!D(l==null?void 0:l.propIgnore)||!(l!=null&&l.propIgnore(t)))&&Object.hasOwn(a,t)){const i=g(e,t),h=g(a,t);this.updateProp({key:t,oldValue:i,newValue:h,propPreLabel:l==null?void 0:l.propPreLabel,propOptions:l==null?void 0:l.propOptions,valueOptions:l==null?void 0:l.valueOptions})}});u(this,"compProp",e=>{var t,i,h,s,d;if(e.oldValue===e.newValue)return null;const a=((i=(t=e==null?void 0:e.propOptions)==null?void 0:t.find(p=>p.value===e.key))==null?void 0:i.label)??e.key,l=((h=e==null?void 0:e.valueOptions)==null?void 0:h.get(e.key))??[];return{propLabel:((e==null?void 0:e.propPreLabel)??"")+a,prop:e.key,oldValue:e.oldValue,newValue:e.newValue,oldValueLabel:e.oldValueLabel?e.oldValueLabel:((s=l==null?void 0:l.find(p=>p.value===e.oldValue))==null?void 0:s.label)??e.oldValue,newValueLabel:e.newValueLabel?e.newValueLabel:((d=l==null?void 0:l.find(p=>p.value===e.newValue))==null?void 0:d.label)??e.newValue}});u(this,"mergeChanegdData",e=>{if(e){for(let a=0;a<this.changedData.value.length;a+=1)if(this.changedData.value[a].prop===e.prop){this.changedData.value[a].newValue=e.newValue,this.changedData.value[a].newValueLabel=e.newValueLabel,this.changedData.value[a].oldValue===this.changedData.value[a].newValue&&(this.changedData.value=this.changedData.value.filter(l=>l.prop!==e.prop));return}this.changedData.value.push(e)}});u(this,"generateChangedRecord",()=>{const e={};for(let a=0;a<this.changedData.value.length;a+=1)e[this.changedData.value[a].prop]=this.changedData.value[a].newValue;return e})}}export{m as C};
