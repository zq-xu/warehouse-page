import{r as _,aK as g,iP as v,d as x,iI as S,c as O,w as C,as as w,av as B,J as I,ax as l}from"./index-226c16fc.js";import{_ as y}from"./Select-6d9d23aa.js";function F(e){const n=_([]),{bool:a,setTrue:o,setFalse:s}=g();async function r(c){const{data:t}=await e(c||"");t&&(n.value=v(t==null?void 0:t.items))}async function u(c){o(),await r(c),s()}async function p(){setTimeout(()=>{r()},1e3)}return{loading:a,options:n,handleSearch:u,handleClear:p,loadOptions:r}}function k(e,n){if(!(e!=null&&e.length))return[n];const a=e.findIndex(o=>o.value===n.value);return a>-1?e[a]=n:e.push(n),e}function M(e,n){for(let a=0;a<n.length;a+=1)e.findIndex(s=>s.value===n[a].value)===-1&&e.push(n[a]);return e}const P=x({__name:"SearchableSelect",props:{listFn:{},options:{default:()=>[]}},emits:["update:value"],setup(e,{emit:n}){const a=e,{options:o,loading:s,handleSearch:r,handleClear:u,loadOptions:p}=F(a.listFn),c=S(),t=O(()=>({...c}));function f(i,d){n("update:value",{value:i,option:d})}function h(){p()}return h(),C(()=>a.options,i=>{o.value=M(i,o.value)}),(i,d)=>{const m=y;return w(),B(m,I({filterable:"",clearable:"",options:l(o),loading:l(s)},t.value,{onSearch:l(r),onClear:l(u),"onUpdate:value":f}),null,16,["options","loading","onSearch","onClear"])}}});export{k as M,P as _};
