import{_ as K,a as Q}from"./refresh-8f0adfbb.js";import{_ as Y,a as Z}from"./export-233b0381.js";import{bO as ee,bP as te,o as w,a as A,aR as W,d as L,c as H,g as U,bn as X,h as G,b as V,w as n,f as e,F as ne,aV as ae,u as s,aU as d,aT as J,bc as j,as as h,aW as oe,e as le,aX as se,aS as ue,bv as ie}from"./index-c0fbc180.js";import{_ as re}from"./round-plus-6e4371b8.js";import{u as ce}from"./useLoading-c938ff56.js";import{c as M,f as q,a as pe}from"./rule-0764e792.js";import{a as _e,b as de,_ as me}from"./DataTable-0b6a753f.js";import{_ as fe}from"./Input-07958780.js";import{_ as ge}from"./InputNumber-88275719.js";import{_ as ve}from"./Select-9326259b.js";import{a as be}from"./Grid-59cc2505.js";import{N as C}from"./Space-91236871.js";import{V as ye,_ as xe}from"./vuedraggable.umd-43878599.js";import{_ as he}from"./Checkbox-30d56674.js";import{N as ke}from"./Popover-1bca94cc.js";import{_ as I}from"./Tag-d7bec445.js";import{N as we}from"./Popconfirm-c810e38b.js";import"./format-length-c9d165c6.js";import"./get-122a2d55.js";import"./use-merged-state-38e23548.js";import"./Suffix-6c84e169.js";import"./Dropdown-d6e9716a.js";import"./next-frame-once-7035a838.js";import"./Add-e81357e7.js";import"./use-compitable-fe02ebf2.js";import"./cssr-4cb8f698.js";function Se(m){return m?m.map((f,r)=>({index:r+1,key:f.id,...f})):[]}const $e=async()=>{const m=await ee.post("/getAllUserList");return te(Se,m)},E={0:"女",1:"男"},Ue=[{value:"0",label:E[0]},{value:"1",label:E[1]}],z={1:"启用",2:"禁用",3:"冻结",4:"软删除"},Ne=[{value:"1",label:z[1]},{value:"2",label:z[2]},{value:"3",label:z[3]},{value:"4",label:z[4]}],Te={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ce=W("path",{fill:"currentColor",d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),ze=[Ce];function De(m,f){return w(),A("svg",Te,ze)}const Me={name:"ic-round-delete",render:De},Ve=L({name:"TableActionModal"}),Le=L({...Ve,props:{visible:{type:Boolean},type:{default:"add"},editData:{default:null}},emits:["update:visible"],setup(m,{emit:f}){const r=m,p=H({get(){return r.visible},set(u){f("update:visible",u)}}),y=()=>{p.value=!1},b=H(()=>({add:"添加用户",edit:"编辑用户"})[r.type]),g=U(),o=X(c()),v={userName:M("请输入用户名"),age:M("请输入年龄"),gender:M("请选择性别"),phone:q.phone,email:q.email,userStatus:M("请选择用户状态")};function c(){return{userName:"",age:null,gender:null,phone:"",email:null,userStatus:null}}function k(u){Object.assign(o,u)}function S(){({add:()=>{const a=c();k(a)},edit:()=>{r.editData&&k(r.editData)}})[r.type]()}async function _(){var u,a;await((u=g.value)==null?void 0:u.validate()),(a=window.$message)==null||a.success("新增成功!"),y()}return G(()=>r.visible,u=>{u&&S()}),(u,a)=>{const N=fe,x=Y,$=ge,F=_e,t=de,i=ve,T=be,D=h,B=C,R=pe,P=oe;return w(),V(P,{show:s(p),"onUpdate:show":a[6]||(a[6]=l=>j(p)?p.value=l:null),preset:"card",title:s(b),class:"w-700px"},{default:n(()=>[e(R,{ref_key:"formRef",ref:g,"label-placement":"left","label-width":80,model:o,rules:v},{default:n(()=>[e(T,{cols:24,"x-gap":18},{default:n(()=>[e(x,{span:12,label:"用户名",path:"userName"},{default:n(()=>[e(N,{value:o.userName,"onUpdate:value":a[0]||(a[0]=l=>o.userName=l)},null,8,["value"])]),_:1}),e(x,{span:12,label:"年龄",path:"age"},{default:n(()=>[e($,{value:o.age,"onUpdate:value":a[1]||(a[1]=l=>o.age=l),clearable:""},null,8,["value"])]),_:1}),e(x,{span:12,label:"性别",path:"gender"},{default:n(()=>[e(t,{value:o.gender,"onUpdate:value":a[2]||(a[2]=l=>o.gender=l)},{default:n(()=>[(w(!0),A(ne,null,ae(s(Ue),l=>(w(),V(F,{key:l.value,value:l.value},{default:n(()=>[d(J(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(x,{span:12,label:"手机号",path:"phone"},{default:n(()=>[e(N,{value:o.phone,"onUpdate:value":a[3]||(a[3]=l=>o.phone=l)},null,8,["value"])]),_:1}),e(x,{span:12,label:"邮箱",path:"email"},{default:n(()=>[e(N,{value:o.email,"onUpdate:value":a[4]||(a[4]=l=>o.email=l)},null,8,["value"])]),_:1}),e(x,{span:12,label:"状态",path:"userStatus"},{default:n(()=>[e(i,{value:o.userStatus,"onUpdate:value":a[5]||(a[5]=l=>o.userStatus=l),options:s(Ne)},null,8,["value","options"])]),_:1})]),_:1}),e(B,{class:"w-full pt-16px",size:24,justify:"end"},{default:n(()=>[e(D,{class:"w-72px",onClick:y},{default:n(()=>[d("取消")]),_:1}),e(D,{class:"w-72px",type:"primary",onClick:_},{default:n(()=>[d("确定")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),Fe={class:"w-180px"},Be={key:0,class:"flex-y-center h-36px px-12px hover:bg-primary_active"},Re=L({__name:"ColumnSetting",props:{columns:null},emits:["update:columns"],setup(m,{emit:f}){const r=m,p=U(y());function y(){return r.columns.map(b=>({...b,checked:!0}))}return G(p,b=>{const o=b.filter(v=>v.checked).map(v=>{const c={...v};return delete c.checked,c});f("update:columns",o)},{deep:!0}),(b,g)=>{const o=K,v=h,c=xe,k=he,S=ke;return w(),V(S,{placement:"bottom",trigger:"click"},{trigger:n(()=>[e(v,{size:"small",type:"primary"},{default:n(()=>[e(o,{class:"mr-4px text-16px"}),d(" 表格列设置 ")]),_:1})]),default:n(()=>[W("div",Fe,[e(s(ye),{modelValue:p.value,"onUpdate:modelValue":g[0]||(g[0]=_=>p.value=_),"item-key":"key"},{item:n(({element:_})=>[_.key?(w(),A("div",Be,[e(c,{class:"mr-8px text-20px cursor-move"}),e(k,{checked:_.checked,"onUpdate:checked":u=>_.checked=u},{default:n(()=>[d(J(_.title),1)]),_:2},1032,["checked","onUpdate:checked"])])):le("",!0)]),_:1},8,["modelValue"])])]),_:1})}}}),ct=L({__name:"index",setup(m){const{loading:f,startLoading:r,endLoading:p}=ce(!1),{bool:y,setTrue:b}=se(),g=U([]);function o(t){g.value=t}async function v(){r();const{data:t}=await $e();t&&setTimeout(()=>{o(t),p()},1e3)}const c=U([{type:"selection",align:"center"},{key:"index",title:"序号",align:"center"},{key:"userName",title:"用户名",align:"center"},{key:"age",title:"用户年龄",align:"center"},{key:"gender",title:"性别",align:"center",render:t=>t.gender?e(I,{type:{0:"success",1:"warning"}[t.gender]},{default:()=>[E[t.gender]]}):e("span",null,null)},{key:"phone",title:"手机号码",align:"center"},{key:"email",title:"邮箱",align:"center"},{key:"userStatus",title:"状态",align:"center",render:t=>t.userStatus?e(I,{type:{1:"success",2:"error",3:"warning",4:"default"}[t.userStatus]},{default:()=>[z[t.userStatus]]}):e("span",null,null)},{key:"actions",title:"操作",align:"center",render:t=>e(C,{justify:"center"},{default:()=>[e(h,{size:"small",onClick:()=>N(t.id)},{default:()=>[d("编辑")]}),e(we,{onPositiveClick:()=>x(t.id)},{default:()=>"确认删除",trigger:()=>e(h,{size:"small"},{default:()=>[d("删除")]})})]})}]),k=U("add");function S(t){k.value=t}const _=U(null);function u(t){_.value=t}function a(){b(),S("add")}function N(t){const i=g.value.find(T=>T.id===t);i&&u(i),S("edit"),b()}function x(t){var i;(i=window.$message)==null||i.info(`点击了删除，rowId为${t}`)}const $=X({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20,25,30],onChange:t=>{$.page=t},onUpdatePageSize:t=>{$.pageSize=t,$.page=1}});function F(){v()}return F(),(t,i)=>{const T=re,D=Me,B=Z,R=Q,P=me,l=ie;return w(),V(l,{title:"用户管理",bordered:!1,class:"rounded-16px shadow-sm"},{default:n(()=>[e(s(C),{class:"pb-12px",justify:"space-between"},{default:n(()=>[e(s(C),null,{default:n(()=>[e(s(h),{type:"primary",onClick:a},{default:n(()=>[e(T,{class:"mr-4px text-20px"}),d(" 新增 ")]),_:1}),e(s(h),{type:"error"},{default:n(()=>[e(D,{class:"mr-4px text-20px"}),d(" 删除 ")]),_:1}),e(s(h),{type:"success"},{default:n(()=>[e(B,{class:"mr-4px text-20px"}),d(" 导出Excel ")]),_:1})]),_:1}),e(s(C),{align:"center",size:18},{default:n(()=>[e(s(h),{size:"small",type:"primary",onClick:v},{default:n(()=>[e(R,{class:ue(["mr-4px text-16px",{"animate-spin":s(f)}])},null,8,["class"]),d(" 刷新表格 ")]),_:1}),e(Re,{columns:s(c),"onUpdate:columns":i[0]||(i[0]=O=>j(c)?c.value=O:null)},null,8,["columns"])]),_:1})]),_:1}),e(P,{columns:s(c),data:g.value,loading:s(f),pagination:$},null,8,["columns","data","loading","pagination"]),e(Le,{visible:s(y),"onUpdate:visible":i[1]||(i[1]=O=>j(y)?y.value=O:null),type:k.value,"edit-data":_.value},null,8,["visible","type","edit-data"])]),_:1})}}});export{ct as default};
