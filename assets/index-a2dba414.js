import{_ as K,a as W}from"./refresh-f08d53e3.js";import{_ as G}from"./export-9dcc60a8.js";import{dh as Q,di as X,as as w,at as M,au as E,d as O,c as P,r as U,b8 as q,w as I,av as j,aw as n,aB as e,aE as Y,aC as d,az as J,ax as i,dj as Z,ag as ee,dk as te,ae as x,aJ as ne,aF as ae,aK as oe,dl as se,dm as le,ay as ue,aW as ie,bk as re}from"./index-5bf6305f.js";import{_ as ce}from"./round-plus-3d7ddcc8.js";import{u as pe}from"./use-loading-7d95af61.js";import{c as D,f as A,a as de}from"./rule-8e39ff9e.js";import{_ as _e}from"./FormItemGridItem-eef1ad88.js";import{a as me,b as fe,_ as ge}from"./DataTable-e888694b.js";import{_ as ve}from"./Input-1579017c.js";import{_ as ye}from"./InputNumber-766f9687.js";import{_ as he}from"./Select-6bdf9184.js";import{a as be}from"./Grid-cd2c67fc.js";import{N as T}from"./Space-21ff50c5.js";import{V as xe,_ as ke}from"./vuedraggable.umd-16ec35b0.js";import{N as we}from"./Checkbox-235a5fc1.js";import{N as $e}from"./Popover-7d8b81d0.js";import{_ as H}from"./Tag-cb1657ff.js";import{_ as Se}from"./Popconfirm-c4e866a6.js";import"./format-length-c9d165c6.js";import"./get-a037867f.js";import"./use-merged-state-ac77a2a7.js";import"./Suffix-ac4d6ce4.js";import"./Dropdown-469735b7.js";import"./next-frame-once-7035a838.js";import"./Add-51e908eb.js";import"./use-compitable-c6a6c985.js";import"./cssr-a4590baa.js";function Ue(_){return _?_.map((m,r)=>({index:r+1,key:m.id,...m})):[]}const Ne=async()=>{const _=await Q.post("/getAllUserList");return X(Ue,_)},Ce={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Te=E("path",{fill:"currentColor",d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"},null,-1),ze=[Te];function De(_,m){return w(),M("svg",Ce,ze)}const Me={name:"ic-round-delete",render:De},Le=O({name:"TableActionModal",__name:"table-action-modal",props:{visible:{type:Boolean},type:{default:"add"},editData:{default:null}},emits:["update:visible"],setup(_,{emit:m}){const r=_,f=P({get(){return r.visible},set(l){m("update:visible",l)}}),h=()=>{f.value=!1},y=P(()=>({add:"添加用户",edit:"编辑用户"})[r.type]),g=U(),o=q(c()),v={userName:D("请输入用户名"),age:D("请输入年龄"),gender:D("请选择性别"),phone:A.phone,email:A.email,userStatus:D("请选择用户状态")};function c(){return{userName:"",age:null,gender:null,phone:"",email:null,userStatus:null}}function k(l){Object.assign(o,l)}function $(){({add:()=>{const a=c();k(a)},edit:()=>{r.editData&&k(r.editData)}})[r.type]()}async function p(){var l,a;await((l=g.value)==null?void 0:l.validate()),(a=window.$message)==null||a.success("新增成功!"),h()}return I(()=>r.visible,l=>{l&&$()}),(l,a)=>{const N=ve,b=_e,S=ye,L=me,t=fe,u=he,C=be,z=x,V=T,B=de,F=ne;return w(),j(F,{show:f.value,"onUpdate:show":a[6]||(a[6]=s=>f.value=s),preset:"card",title:y.value,class:"w-700px"},{default:n(()=>[e(B,{ref_key:"formRef",ref:g,"label-placement":"left","label-width":80,model:o,rules:v},{default:n(()=>[e(C,{cols:24,"x-gap":18},{default:n(()=>[e(b,{span:12,label:"用户名",path:"userName"},{default:n(()=>[e(N,{value:o.userName,"onUpdate:value":a[0]||(a[0]=s=>o.userName=s)},null,8,["value"])]),_:1}),e(b,{span:12,label:"年龄",path:"age"},{default:n(()=>[e(S,{value:o.age,"onUpdate:value":a[1]||(a[1]=s=>o.age=s),clearable:""},null,8,["value"])]),_:1}),e(b,{span:12,label:"性别",path:"gender"},{default:n(()=>[e(t,{value:o.gender,"onUpdate:value":a[2]||(a[2]=s=>o.gender=s)},{default:n(()=>[(w(!0),M(ee,null,Y(i(Z),s=>(w(),j(L,{key:s.value,value:s.value},{default:n(()=>[d(J(s.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(b,{span:12,label:"手机号",path:"phone"},{default:n(()=>[e(N,{value:o.phone,"onUpdate:value":a[3]||(a[3]=s=>o.phone=s)},null,8,["value"])]),_:1}),e(b,{span:12,label:"邮箱",path:"email"},{default:n(()=>[e(N,{value:o.email,"onUpdate:value":a[4]||(a[4]=s=>o.email=s)},null,8,["value"])]),_:1}),e(b,{span:12,label:"状态",path:"userStatus"},{default:n(()=>[e(u,{value:o.userStatus,"onUpdate:value":a[5]||(a[5]=s=>o.userStatus=s),options:i(te)},null,8,["value","options"])]),_:1})]),_:1}),e(V,{class:"w-full pt-16px",size:24,justify:"end"},{default:n(()=>[e(z,{class:"w-72px",onClick:h},{default:n(()=>[d("取消")]),_:1}),e(z,{class:"w-72px",type:"primary",onClick:p},{default:n(()=>[d("确定")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),Ve={class:"w-180px"},Be={key:0,class:"flex-y-center h-36px px-12px hover:bg-primary_active"},Fe=O({__name:"column-setting",props:{columns:{}},emits:["update:columns"],setup(_,{emit:m}){const r=_,f=U(h());function h(){return r.columns.map(y=>({...y,checked:!0}))}return I(f,y=>{const o=y.filter(v=>v.checked).map(v=>{const c={...v};return delete c.checked,c});m("update:columns",o)},{deep:!0}),(y,g)=>{const o=K,v=x,c=ke,k=we,$=$e;return w(),j($,{placement:"bottom",trigger:"click"},{trigger:n(()=>[e(v,{size:"small",type:"primary"},{default:n(()=>[e(o,{class:"mr-4px text-16px"}),d(" 表格列设置 ")]),_:1})]),default:n(()=>[E("div",Ve,[e(i(xe),{modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=p=>f.value=p),"item-key":"key"},{item:n(({element:p})=>[p.key?(w(),M("div",Be,[e(c,{class:"mr-8px text-20px cursor-move"}),e(k,{checked:p.checked,"onUpdate:checked":l=>p.checked=l},{default:n(()=>[d(J(p.title),1)]),_:2},1032,["checked","onUpdate:checked"])])):ae("",!0)]),_:1},8,["modelValue"])])]),_:1})}}}),Re={class:"overflow-hidden"},je={class:"flex-col h-full"},dt=O({__name:"index",setup(_){const{loading:m,startLoading:r,endLoading:f}=pe(!1),{bool:h,setTrue:y}=oe(),g=U([]);function o(t){g.value=t}async function v(){r();const{data:t}=await Ne();t&&setTimeout(()=>{o(t),f()},1e3)}const c=U([{type:"selection",align:"center"},{key:"index",title:"序号",align:"center"},{key:"userName",title:"用户名",align:"center"},{key:"age",title:"用户年龄",align:"center"},{key:"gender",title:"性别",align:"center",render:t=>t.gender?e(H,{type:{0:"success",1:"warning"}[t.gender]},{default:()=>[se[t.gender]]}):e("span",null,null)},{key:"phone",title:"手机号码",align:"center"},{key:"email",title:"邮箱",align:"center"},{key:"userStatus",title:"状态",align:"center",render:t=>t.userStatus?e(H,{type:{1:"success",2:"error",3:"warning",4:"default"}[t.userStatus]},{default:()=>[le[t.userStatus]]}):e("span",null,null)},{key:"actions",title:"操作",align:"center",render:t=>e(T,{justify:"center"},{default:()=>[e(x,{size:"small",onClick:()=>N(t.id)},{default:()=>[d("编辑")]}),e(Se,{onPositiveClick:()=>b(t.id)},{default:()=>"确认删除",trigger:()=>e(x,{size:"small"},{default:()=>[d("删除")]})})]})}]),k=U("add");function $(t){k.value=t}const p=U(null);function l(t){p.value=t}function a(){y(),$("add")}function N(t){const u=g.value.find(C=>C.id===t);u&&l(u),$("edit"),y()}function b(t){var u;(u=window.$message)==null||u.info(`点击了删除，rowId为${t}`)}const S=q({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20,25,30],onChange:t=>{S.page=t},onUpdatePageSize:t=>{S.pageSize=t,S.page=1}});function L(){v()}return L(),(t,u)=>{const C=ce,z=Me,V=G,B=W,F=ge,s=re;return w(),M("div",Re,[e(s,{title:"用户管理",bordered:!1,class:"h-full rounded-8px shadow-sm"},{default:n(()=>[E("div",je,[e(i(T),{class:"pb-12px",justify:"space-between"},{default:n(()=>[e(i(T),null,{default:n(()=>[e(i(x),{type:"primary",onClick:a},{default:n(()=>[e(C,{class:"mr-4px text-20px"}),d(" 新增 ")]),_:1}),e(i(x),{type:"error"},{default:n(()=>[e(z,{class:"mr-4px text-20px"}),d(" 删除 ")]),_:1}),e(i(x),{type:"success"},{default:n(()=>[e(V,{class:"mr-4px text-20px"}),d(" 导出Excel ")]),_:1})]),_:1}),e(i(T),{align:"center",size:18},{default:n(()=>[e(i(x),{size:"small",type:"primary",onClick:v},{default:n(()=>[e(B,{class:ue(["mr-4px text-16px",{"animate-spin":i(m)}])},null,8,["class"]),d(" 刷新表格 ")]),_:1}),e(Fe,{columns:c.value,"onUpdate:columns":u[0]||(u[0]=R=>c.value=R)},null,8,["columns"])]),_:1})]),_:1}),e(F,{columns:c.value,data:g.value,loading:i(m),pagination:S,"flex-height":"",class:"flex-1-hidden"},null,8,["columns","data","loading","pagination"]),e(Le,{visible:i(h),"onUpdate:visible":u[1]||(u[1]=R=>ie(h)?h.value=R:null),type:k.value,"edit-data":p.value},null,8,["visible","type","edit-data"])])]),_:1})])}}});export{dt as default};
