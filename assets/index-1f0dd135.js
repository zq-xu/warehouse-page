import{iA as A,iB as C,d as D,aY as I,r as U,c as O,as as B,av as q,aw as s,aB as a,ax as n,aD as p,aC as i,az as d,ao as k,bk as F,df as J}from"./index-82878933.js";import{_ as L,a as R,b as _,s as T}from"./index.vue_vue_type_script_setup_true_lang-2900da8b.js";import{d as V}from"./time-2af255bb.js";import{C as j}from"./difference-1a39f4ec.js";import{c as w}from"./customer-6b6395e8.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-e5c34214.js";import{N as Y}from"./Space-5ce7b0d3.js";import{_ as E,a as G}from"./DescriptionsItem-ae41fcf7.js";import{_ as H}from"./Tag-44f4bb3b.js";import{_ as K,a as M}from"./Tabs-4c98b140.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-120c33c2.js";import"./Select-8c691358.js";import"./use-merged-state-73225c5f.js";import"./Suffix-9de0baa4.js";import"./use-compitable-88d2e5e4.js";import"./cssr-4b5a1daa.js";import"./Popover-77a1abb2.js";import"./get-f3cd441e.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./DatePicker-308829db.js";import"./Dropdown-b655dc06.js";import"./DataTable-380fd57e.js";import"./Checkbox-60e346ec.js";import"./Input-73537fce.js";import"./InputNumber-d988ee38.js";import"./Add-b56c8fee.js";import"./Switch-db302ed3.js";import"./text-1d62828f.js";import"./ListTable.vue_vue_type_script_setup_true_lang-158742c1.js";import"./refresh-26d8b195.js";import"./use-loading-499c0e90.js";import"./vuedraggable.umd-dc8b72a9.js";import"./Popconfirm-ec2f01b7.js";const y={...A},Q=[...C],Oe=D({__name:"index",setup(W){const v=I(),o=U({}),g=O(()=>{var r,t;return J((r=o.value)==null?void 0:r.createdAt)?V((t=o.value)==null?void 0:t.createdAt):""}),f=new j;function c(r,t){const u=o.value[r];T(o.value,r,t),f.updateProp({key:r,oldValue:u,newValue:t,propOptions:Q})}async function h(){var t,u;const{error:r}=await w.update(o.value.id,f.generateChangedRecord());r?(t=window.$message)==null||t.error(`${p("warehouse.common.operateFailed")} ${r.msg}`):((u=window.$message)==null||u.success(p("warehouse.common.editSuccess")),setTimeout(()=>{k().reloadPage()},500))}async function x(){var u;const r=(u=v.query)==null?void 0:u.id,{data:t}=await w.get(r);o.value=JSON.parse(JSON.stringify(t))}return x(),(r,t)=>{const u=Y,m=E,b=H,P=G,$=K,N=M,S=F;return B(),q(S,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:s(()=>[a(u,{class:"pb-12px",justify:"space-between"},{default:s(()=>[a(L,{"last-path":"warehouse_customer"}),a(R,{class:"max-w-500px",data:n(f).changedData.value,onPositiveClick:h},null,8,["data"])]),_:1}),a(P,{columns:6,"label-placement":"left",class:"text-center",bordered:""},{default:s(()=>[a(m,{span:2,label:n(p)("warehouse.property.name")},{default:s(()=>{var e;return[i(d((e=o.value)==null?void 0:e.name),1)]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.phone")},{default:s(()=>{var e;return[a(_,{"edit-component":"NInput",data:(e=o.value)==null?void 0:e.phone,"onUpdate:data":t[0]||(t[0]=l=>c("phone",l))},null,8,["data"])]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.address")},{default:s(()=>{var e;return[a(_,{data:(e=o.value)==null?void 0:e.address,"onUpdate:data":t[1]||(t[1]=l=>c("address",l))},null,8,["data"])]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.totalPaid")+"/"+n(p)("warehouse.property.totalPrice")},{default:s(()=>[a(b,{type:"success"},{default:s(()=>{var e;return[i("€"+d((e=o.value)==null?void 0:e.totalPaid),1)]}),_:1}),i(" / "),a(b,{type:"primary"},{default:s(()=>{var e;return[i("€"+d((e=o.value)==null?void 0:e.totalPrice),1)]}),_:1})]),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.status")},{default:s(()=>{var e;return[a(b,{type:n(y)[((e=o.value)==null?void 0:e.status)||"1"].type},{default:s(()=>{var l;return[i(d(n(y)[((l=o.value)==null?void 0:l.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),a(m,{span:2,label:n(p)("warehouse.property.createdAt")},{default:s(()=>[i(d(g.value),1)]),_:1},8,["label"]),a(m,{span:6,label:n(p)("warehouse.property.invoiceInfo"),"content-style":{textAlign:"left",whiteSpace:"pre-wrap"}},{default:s(()=>{var e;return[a(_,{"edit-component":"NInput","edit-component-props":{type:"textarea"},data:(e=o.value)==null?void 0:e.invoiceInfo,"onUpdate:data":t[2]||(t[2]=l=>c("invoiceInfo",l))},null,8,["data"])]}),_:1},8,["label"]),a(m,{span:6,label:n(p)("warehouse.property.comment")},{default:s(()=>{var e;return[a(_,{data:(e=o.value)==null?void 0:e.comment,"onUpdate:data":t[3]||(t[3]=l=>c("comment",l))},null,8,["data"])]}),_:1},8,["label"])]),_:1}),a(N,{type:"line",animated:""},{default:s(()=>[a($,{name:"order",tab:n(p)("warehouse.order.tittle")},{default:s(()=>{var e;return[a(z,{"query-map":{customerId:(e=o.value)==null?void 0:e.id}},null,8,["query-map"])]}),_:1},8,["tab"])]),_:1})]),_:1})}}});export{Oe as default};
