import{_ as A,a as d,s as D,b as I}from"./index.vue_vue_type_script_setup_true_lang-b973b199.js";import{d as U,bf as O,be as T,g as k,o as q,b as B,w as e,f as a,u as _,as as R,aU as u,aT as m,bu as j,j as J,bv as L}from"./index-0f5e7fd2.js";import{C as V}from"./difference-a94aa3dd.js";import{c as b}from"./customer-2a3370d1.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-4c2c0441.js";import{N as E}from"./Space-5b51c63e.js";import{_ as F,a as G}from"./DescriptionsItem-bafbf936.js";import{_ as H}from"./Tag-fc867a92.js";import{_ as K,a as M}from"./Tabs-6bf8dbd5.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-15eb87d2.js";import"./Suffix-fe33d907.js";import"./Dropdown-8029d4ba.js";import"./Popover-08a822b4.js";import"./get-e0897dcc.js";import"./format-length-c9d165c6.js";import"./cssr-3a094478.js";import"./use-merged-state-1733fb4d.js";import"./use-compitable-a08fa82e.js";import"./next-frame-once-7035a838.js";import"./Select-5f4c1a9d.js";import"./DataTable-31213c5f.js";import"./Checkbox-c85ca9d3.js";import"./Input-c62967e2.js";import"./InputNumber-895e894e.js";import"./Add-9f65a47d.js";import"./Switch-55fb9799.js";import"./text-46376c8b.js";import"./Popconfirm-ce139e93.js";import"./crud-c9b4981a.js";import"./order-bdd5fd4c.js";import"./ListTable.vue_vue_type_script_setup_true_lang-ff4a017a.js";import"./vuedraggable.umd-54311406.js";import"./refresh-f281bbb3.js";import"./useLoading-27b191c1.js";const v={1:{label:"正常",type:"success"},2:{label:"异常",type:"error"},3:{label:"已删除",type:"default"}},Q=[{label:"名称",value:"name"},{label:"联系方式",value:"phone"},{label:"常用地址",value:"address"},{label:"创建时间",value:"createdAt"},{label:"更新时间",value:"updatedAt"},{label:"备注信息",value:"comment"}],Ut=U({__name:"index",setup(W){const{routerPush:g}=O();function y(){g({name:j("warehouse_product")})}const w=T(),n=k({}),c=new V;function i(l,o){const p=n.value[l];D(n.value,l,o),c.updateProp({key:l,oldValue:p,newValue:o,propOptions:Q})}async function x(){var o,p;const{error:l}=await b.update(n.value.id,c.generateChangedRecord());l?(o=window.$message)==null||o.error(`操作失败! ${l.msg}`):((p=window.$message)==null||p.success("修改成功!"),setTimeout(()=>{J().reloadPage()},500))}async function P(){var p;const l=(p=w.query)==null?void 0:p.id,{data:o}=await b.get(l);n.value=JSON.parse(JSON.stringify(o))}return P(),(l,o)=>{const p=I,N=E,r=F,f=H,h=G,C=K,S=M,$=L;return q(),B($,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:e(()=>[a(N,{class:"pb-12px",justify:"space-between"},{default:e(()=>[a(_(R),{onClick:y},{icon:e(()=>[a(p)]),default:e(()=>[u("返回 ")]),_:1}),a(A,{class:"max-w-500px",data:_(c).changedData.value,onPositiveClick:x},null,8,["data"])]),_:1}),a(h,{columns:6,"label-placement":"left",class:"text-center",bordered:""},{default:e(()=>[a(r,{span:2,label:"客户名称"},{default:e(()=>{var t;return[u(m((t=n.value)==null?void 0:t.name),1)]}),_:1}),a(r,{span:2,label:"联系方式"},{default:e(()=>{var t;return[a(d,{"edit-component":"NInput",data:(t=n.value)==null?void 0:t.phone,"onUpdate:data":o[0]||(o[0]=s=>i("phone",s))},null,8,["data"])]}),_:1}),a(r,{span:2,label:"常用地址"},{default:e(()=>{var t;return[a(d,{data:(t=n.value)==null?void 0:t.address,"onUpdate:data":o[1]||(o[1]=s=>i("address",s))},null,8,["data"])]}),_:1}),a(r,{span:2,label:"支付/总额"},{default:e(()=>[a(f,{type:"success"},{default:e(()=>{var t;return[u(" €"+m((t=n.value)==null?void 0:t.totalPaid),1)]}),_:1}),u("/ "),a(f,{type:"primary"},{default:e(()=>{var t;return[u(" €"+m((t=n.value)==null?void 0:t.totalPrice),1)]}),_:1})]),_:1}),a(r,{span:2,label:"客户状态"},{default:e(()=>{var t;return[a(f,{type:_(v)[((t=n.value)==null?void 0:t.status)||"1"].type},{default:e(()=>{var s;return[u(m(_(v)[((s=n.value)==null?void 0:s.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1}),a(r,{span:2,label:"创建时间"},{default:e(()=>{var t;return[u(m((t=n.value)==null?void 0:t.createdAt),1)]}),_:1}),a(r,{span:6,label:"发票信息","content-style":{textAlign:"left",whiteSpace:"pre-wrap"}},{default:e(()=>{var t;return[a(d,{"edit-component":"NInput","edit-component-props":{type:"textarea"},data:(t=n.value)==null?void 0:t.invoiceInfo,"onUpdate:data":o[2]||(o[2]=s=>i("invoiceInfo",s))},null,8,["data"])]}),_:1}),a(r,{span:6,label:"备注信息"},{default:e(()=>{var t;return[a(d,{data:(t=n.value)==null?void 0:t.comment,"onUpdate:data":o[3]||(o[3]=s=>i("comment",s))},null,8,["data"])]}),_:1})]),_:1}),a(S,{type:"line",animated:""},{default:e(()=>[a(C,{name:"lot",tab:"订单信息"},{default:e(()=>{var t;return[a(z,{"query-map":{customerId:(t=n.value)==null?void 0:t.id}},null,8,["query-map"])]}),_:1})]),_:1})]),_:1})}}});export{Ut as default};
