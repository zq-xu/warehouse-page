import{_ as M,a as S}from"./export-0edec6cc.js";import{_ as q}from"./round-plus-9ea1f9f8.js";import{q as L,d as C,c as V,g as h,bn as A,o as R,b as T,w as o,f as t,aU as d,u,bc as $,as as f,aW as P,aX as j,bf as z,bu as E,bv as F}from"./index-c504f951.js";import{s as B}from"./salesman-d853935b.js";import{_ as I}from"./ListTable.vue_vue_type_script_setup_true_lang-3459e516.js";import{s as W}from"./salesman-761844d1.js";import{_ as X}from"./Tag-4accb8f6.js";import{c as k,u as G,a as H}from"./rule-1bad6daf.js";import{_ as J}from"./Input-a8459934.js";import{a as K}from"./Grid-1713c493.js";import{N}from"./Space-45b7edb9.js";import"./crud-c9b4981a.js";import"./vuedraggable.umd-9f9c900f.js";import"./refresh-21f7caa5.js";import"./Checkbox-dc3673ea.js";import"./use-merged-state-184d082d.js";import"./Popover-1b93b8ee.js";import"./Suffix-4a685509.js";import"./get-3eee0bd1.js";import"./format-length-c9d165c6.js";import"./cssr-70ddafe0.js";import"./use-compitable-3c06317e.js";import"./next-frame-once-7035a838.js";import"./useLoading-41614498.js";import"./DataTable-48ae6045.js";import"./Dropdown-5ad302b9.js";import"./Select-01f4371d.js";const O=[{key:"name",title:"名称",align:"center"},{key:"phone",title:"联系方式",align:"center"},{key:"comment",title:"备注信息",align:"center",ellipsis:{tooltip:!0}},{key:"status",title:"状态",align:"center",render:p=>{const a=W[p.status||"1"];return L(X,{style:{marginRight:"6px"},type:a.type,bordered:!1},{default:()=>a.label})}}],Q=C({__name:"AddSalesmanModal",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(p,{emit:a}){const b=p,l=V({get(){return b.visible},set(r){a("update:visible",r)}}),c=()=>{l.value=!1},_=h(),n=A({}),v={name:k("请输入供应商名称"),phone:k("请输入联系方式"),comment:G};async function g(){var e,s;await((e=_.value)==null?void 0:e.validate());const{error:r}=await B.create(n);r||((s=window.$message)==null||s.success("新增成功!"),c(),a("succeed"))}return(r,e)=>{const s=J,m=M,y=K,x=H,w=f,U=N,D=P;return R(),T(D,{show:u(l),"onUpdate:show":e[3]||(e[3]=i=>$(l)?l.value=i:null),preset:"card",title:"新增销售人员",class:"w-700px"},{default:o(()=>[t(x,{ref_key:"formRef",ref:_,class:"w-80% m-auto","label-placement":"left","label-width":150,model:n,rules:v},{default:o(()=>[t(y,{cols:12,"x-gap":18},{default:o(()=>[t(m,{span:12,label:"名称",path:"name"},{default:o(()=>[t(s,{value:n.name,"onUpdate:value":e[0]||(e[0]=i=>n.name=i),clearable:""},null,8,["value"])]),_:1}),t(m,{span:12,label:"联系方式",path:"phone"},{default:o(()=>[t(s,{value:n.phone,"onUpdate:value":e[1]||(e[1]=i=>n.phone=i),clearable:""},null,8,["value"])]),_:1}),t(m,{span:36,label:"备注",path:"comment"},{default:o(()=>[t(s,{value:n.comment,"onUpdate:value":e[2]||(e[2]=i=>n.comment=i)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),t(U,{class:"w-full pt-16px",size:24,justify:"end"},{default:o(()=>[t(w,{class:"w-72px",type:"primary",onClick:g},{default:o(()=>[d("确定")]),_:1})]),_:1})]),_:1},8,["show"])}}}),Re=C({__name:"index",setup(p){const{bool:a,setTrue:b}=j(),l=h(),c=h([]);async function _(){const{data:e}=await B.list();e&&(c.value=e.items)}const n=()=>{var e;return(e=l.value)==null?void 0:e.loadTableData()},v=[{key:"actions",title:"操作",align:"center",render:e=>t(N,{justify:"center"},{default:()=>[t(f,{size:"small",onClick:()=>r(e.id)},{default:()=>[d("详情")]})]})}],{routerPush:g}=z();function r(e){g({name:E("warehouse_salesman-detail"),query:{id:e}})}return(e,s)=>{const m=q,y=S,x=F;return R(),T(x,{bordered:!1,class:"rounded-16px shadow-sm"},{default:o(()=>[t(I,{ref_key:"listTable",ref:l,columns:u(O),"action-columns":v,data:c.value,onLoadData:_},{default:o(()=>[t(u(f),{type:"primary",onClick:u(b)},{default:o(()=>[t(m,{class:"mr-4px text-20px"}),d(" 新增 ")]),_:1},8,["onClick"]),t(u(f),{type:"success"},{default:o(()=>[t(y,{class:"mr-4px text-20px"}),d(" 导出Excel ")]),_:1})]),_:1},8,["columns","data"]),t(Q,{visible:u(a),"onUpdate:visible":s[0]||(s[0]=w=>$(a)?a.value=w:null),onSucceed:n},null,8,["visible"])]),_:1})}}});export{Re as default};
