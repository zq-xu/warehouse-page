import{d as h,aY as C,r as S,c as D,as as I,av as U,aw as n,aB as t,ax as f,aC as u,az as m,ao as O,bk as q,df as B}from"./index-d54e27e5.js";import{_ as k,a as J,b as i,s as R}from"./index.vue_vue_type_script_setup_true_lang-343398be.js";import{d as T}from"./time-4019bf4e.js";import{C as V}from"./difference-996e9818.js";import{c as b}from"./customer-5c471e66.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-9980ce4e.js";import{N as z}from"./Space-87b276b9.js";import{_ as F,a as L}from"./DescriptionsItem-fd3cf0a4.js";import{_ as Y}from"./Tag-e65656a5.js";import{_ as E,a as G}from"./Tabs-9ed1d363.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-cb2f3ea7.js";import"./Select-559fcc4a.js";import"./use-merged-state-3e142966.js";import"./Suffix-bd6327fa.js";import"./use-compitable-689c1d61.js";import"./cssr-66e6389d.js";import"./Popover-7b0135d6.js";import"./get-f627e15a.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./DatePicker-cdedcaf1.js";import"./Dropdown-fc098814.js";import"./DataTable-5a20c5e9.js";import"./Checkbox-489d1cbc.js";import"./Input-ed39452b.js";import"./InputNumber-c3e3734c.js";import"./Add-eea2bb41.js";import"./Switch-c2bcd2d6.js";import"./text-a2551e0f.js";import"./Popconfirm-33c15315.js";import"./ListTable.vue_vue_type_script_setup_true_lang-8a138c6f.js";import"./vuedraggable.umd-7d530147.js";import"./refresh-5904e64e.js";import"./use-loading-a821e2fc.js";const v={1:{label:"正常",type:"success"},2:{label:"异常",type:"error"},3:{label:"已删除",type:"default"}},H=[{label:"名称",value:"name"},{label:"联系方式",value:"phone"},{label:"常用地址",value:"address"},{label:"创建时间",value:"createdAt"},{label:"更新时间",value:"updatedAt"},{label:"备注信息",value:"comment"}],Da=h({__name:"index",setup(K){const g=C(),o=S({}),y=D(()=>{var s,e;return B((s=o.value)==null?void 0:s.createdAt)?T((e=o.value)==null?void 0:e.createdAt):""}),c=new V;function d(s,e){const l=o.value[s];R(o.value,s,e),c.updateProp({key:s,oldValue:l,newValue:e,propOptions:H})}async function w(){var e,l;const{error:s}=await b.update(o.value.id,c.generateChangedRecord());s?(e=window.$message)==null||e.error(`操作失败! ${s.msg}`):((l=window.$message)==null||l.success("修改成功!"),setTimeout(()=>{O().reloadPage()},500))}async function x(){var l;const s=(l=g.query)==null?void 0:l.id,{data:e}=await b.get(s);o.value=JSON.parse(JSON.stringify(e))}return x(),(s,e)=>{const l=z,r=F,_=Y,N=L,P=E,A=G,$=q;return I(),U($,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:n(()=>[t(l,{class:"pb-12px",justify:"space-between"},{default:n(()=>[t(k,{"last-path":"warehouse_customer"}),t(J,{class:"max-w-500px",data:f(c).changedData.value,onPositiveClick:w},null,8,["data"])]),_:1}),t(N,{columns:6,"label-placement":"left",class:"text-center",bordered:""},{default:n(()=>[t(r,{span:2,label:"客户名称"},{default:n(()=>{var a;return[u(m((a=o.value)==null?void 0:a.name),1)]}),_:1}),t(r,{span:2,label:"联系方式"},{default:n(()=>{var a;return[t(i,{"edit-component":"NInput",data:(a=o.value)==null?void 0:a.phone,"onUpdate:data":e[0]||(e[0]=p=>d("phone",p))},null,8,["data"])]}),_:1}),t(r,{span:2,label:"常用地址"},{default:n(()=>{var a;return[t(i,{data:(a=o.value)==null?void 0:a.address,"onUpdate:data":e[1]||(e[1]=p=>d("address",p))},null,8,["data"])]}),_:1}),t(r,{span:2,label:"支付/总额"},{default:n(()=>[t(_,{type:"success"},{default:n(()=>{var a;return[u("€"+m((a=o.value)==null?void 0:a.totalPaid),1)]}),_:1}),u(" / "),t(_,{type:"primary"},{default:n(()=>{var a;return[u("€"+m((a=o.value)==null?void 0:a.totalPrice),1)]}),_:1})]),_:1}),t(r,{span:2,label:"客户状态"},{default:n(()=>{var a;return[t(_,{type:f(v)[((a=o.value)==null?void 0:a.status)||"1"].type},{default:n(()=>{var p;return[u(m(f(v)[((p=o.value)==null?void 0:p.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1}),t(r,{span:2,label:"创建时间"},{default:n(()=>[u(m(y.value),1)]),_:1}),t(r,{span:6,label:"发票信息","content-style":{textAlign:"left",whiteSpace:"pre-wrap"}},{default:n(()=>{var a;return[t(i,{"edit-component":"NInput","edit-component-props":{type:"textarea"},data:(a=o.value)==null?void 0:a.invoiceInfo,"onUpdate:data":e[2]||(e[2]=p=>d("invoiceInfo",p))},null,8,["data"])]}),_:1}),t(r,{span:6,label:"备注信息"},{default:n(()=>{var a;return[t(i,{data:(a=o.value)==null?void 0:a.comment,"onUpdate:data":e[3]||(e[3]=p=>d("comment",p))},null,8,["data"])]}),_:1})]),_:1}),t(A,{type:"line",animated:""},{default:n(()=>[t(P,{name:"lot",tab:"订单信息"},{default:n(()=>{var a;return[t(j,{"query-map":{customerId:(a=o.value)==null?void 0:a.id}},null,8,["query-map"])]}),_:1})]),_:1})]),_:1})}}});export{Da as default};
