import{d as P,aY as S,r as A,c as O,as as q,av as B,aw as r,aB as a,ax as p,aD as m,aC as d,az as _,ao as I,bk as U,df as k}from"./index-d34e0519.js";import{d as f,a as F}from"./deliverer-1bb95948.js";import{_ as J,a as R,b,s as T}from"./index.vue_vue_type_script_setup_true_lang-21655c41.js";import{d as V}from"./time-0f38da99.js";import{C as j}from"./difference-a6ec943c.js";import{d as v}from"./deliverer-350ffb05.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-b113ef98.js";import{N as L}from"./Space-b4b83a0d.js";import{_ as Y,a as E}from"./DescriptionsItem-f5b97799.js";import{_ as G}from"./Tag-1e615c64.js";import{_ as H,a as K}from"./Tabs-b311b687.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-b25c0716.js";import"./Select-ed1484d1.js";import"./use-merged-state-38e48ef5.js";import"./Suffix-82265be2.js";import"./use-compitable-c9ad10e0.js";import"./cssr-bdc68017.js";import"./Popover-7a5e5188.js";import"./get-0596a638.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./DatePicker-bc839373.js";import"./Dropdown-07d5487b.js";import"./DataTable-5dd479e1.js";import"./Checkbox-5d323e84.js";import"./Input-5a80c108.js";import"./InputNumber-f672dc0a.js";import"./Add-b172a4da.js";import"./Switch-ad10093b.js";import"./text-92e19e0a.js";import"./ListTable.vue_vue_type_script_setup_true_lang-6f3668cb.js";import"./refresh-8a8ec83d.js";import"./use-loading-f04b65e1.js";import"./vuedraggable.umd-510056e9.js";import"./Popconfirm-ab3b5a82.js";const qe=P({__name:"index",setup(M){const w=S(),o=A({}),g=O(()=>{var n,e;return k((n=o.value)==null?void 0:n.createdAt)?V((e=o.value)==null?void 0:e.createdAt):""}),u=new j;function c(n,e){const s=o.value[n];T(o.value,n,e),u.updateProp({key:n,oldValue:s,newValue:e,propOptions:F})}async function h(){var e,s;const{error:n}=await v.update(o.value.id,u.generateChangedRecord());n?(e=window.$message)==null||e.error(`${m("warehouse.common.operateFailed")} ${n.msg}`):((s=window.$message)==null||s.success(m("warehouse.common.editSuccess")),setTimeout(()=>{I().reloadPage()},500))}async function y(){var s;const n=(s=w.query)==null?void 0:s.id,{data:e}=await v.get(n);o.value=JSON.parse(JSON.stringify(e))}return y(),(n,e)=>{const s=L,i=Y,x=G,$=E,N=H,C=K,D=U;return q(),B(D,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:r(()=>[a(s,{class:"pb-12px",justify:"space-between"},{default:r(()=>[a(J,{"last-path":"warehouse_deliverer"}),a(R,{class:"max-w-500px",data:p(u).changedData.value,onPositiveClick:h},null,8,["data"])]),_:1}),a($,{columns:4,"label-placement":"left",class:"text-center",bordered:""},{default:r(()=>[a(i,{span:2,label:p(m)("warehouse.property.name")},{default:r(()=>{var t;return[d(_((t=o.value)==null?void 0:t.name),1)]}),_:1},8,["label"]),a(i,{span:2,label:p(m)("warehouse.property.status")},{default:r(()=>{var t;return[a(x,{type:p(f)[((t=o.value)==null?void 0:t.status)||"1"].type},{default:r(()=>{var l;return[d(_(p(f)[((l=o.value)==null?void 0:l.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),a(i,{span:2,label:p(m)("warehouse.property.phone")},{default:r(()=>{var t;return[a(b,{"edit-component":"NInput",data:(t=o.value)==null?void 0:t.phone,"onUpdate:data":e[0]||(e[0]=l=>c("phone",l))},null,8,["data"])]}),_:1},8,["label"]),a(i,{span:2,label:p(m)("warehouse.property.createdAt")},{default:r(()=>[d(_(g.value),1)]),_:1},8,["label"]),a(i,{span:4,label:p(m)("warehouse.property.comment")},{default:r(()=>{var t;return[a(b,{data:(t=o.value)==null?void 0:t.comment,"onUpdate:data":e[1]||(e[1]=l=>c("comment",l))},null,8,["data"])]}),_:1},8,["label"])]),_:1}),a(C,{type:"line",animated:""},{default:r(()=>[a(N,{name:"order",tab:p(m)("warehouse.order.tittle")},{default:r(()=>{var t;return[a(z,{"query-map":{delivererId:(t=o.value)==null?void 0:t.id}},null,8,["query-map"])]}),_:1},8,["tab"])]),_:1})]),_:1})}}});export{qe as default};
