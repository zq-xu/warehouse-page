import{d as P,aY as S,r as A,c as O,as as q,av as B,aw as n,aB as e,ax as p,aD as m,aC as _,az as c,ao as I,bk as U,df as k}from"./index-82878933.js";import{s as f,a as F}from"./salesman-f85d4dcf.js";import{_ as J,a as R,b,s as T}from"./index.vue_vue_type_script_setup_true_lang-2900da8b.js";import{d as V}from"./time-2af255bb.js";import{C as j}from"./difference-1a39f4ec.js";import{s as w}from"./salesman-6add9d98.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-e5c34214.js";import{N as L}from"./Space-5ce7b0d3.js";import{_ as Y,a as E}from"./DescriptionsItem-ae41fcf7.js";import{_ as G}from"./Tag-44f4bb3b.js";import{_ as H,a as K}from"./Tabs-4c98b140.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-120c33c2.js";import"./Select-8c691358.js";import"./use-merged-state-73225c5f.js";import"./Suffix-9de0baa4.js";import"./use-compitable-88d2e5e4.js";import"./cssr-4b5a1daa.js";import"./Popover-77a1abb2.js";import"./get-f3cd441e.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./DatePicker-308829db.js";import"./Dropdown-b655dc06.js";import"./DataTable-380fd57e.js";import"./Checkbox-60e346ec.js";import"./Input-73537fce.js";import"./InputNumber-d988ee38.js";import"./Add-b56c8fee.js";import"./Switch-db302ed3.js";import"./text-1d62828f.js";import"./ListTable.vue_vue_type_script_setup_true_lang-158742c1.js";import"./refresh-26d8b195.js";import"./use-loading-499c0e90.js";import"./vuedraggable.umd-dc8b72a9.js";import"./Popconfirm-ec2f01b7.js";const qa=P({__name:"index",setup(M){const g=S(),o=A({}),h=O(()=>{var s,a;return k((s=o.value)==null?void 0:s.createdAt)?V((a=o.value)==null?void 0:a.createdAt):""}),u=new j;function d(s,a){const r=o.value[s];T(o.value,s,a),u.updateProp({key:s,oldValue:r,newValue:a,propOptions:F})}async function v(){var a,r;const{error:s}=await w.update(o.value.id,u.generateChangedRecord());s?(a=window.$message)==null||a.error(`${m("warehouse.common.operateFailed")} ${s.msg}`):((r=window.$message)==null||r.success(m("warehouse.common.editSuccess")),setTimeout(()=>{I().reloadPage()},500))}async function y(){var r;const s=(r=g.query)==null?void 0:r.id,{data:a}=await w.get(s);o.value=JSON.parse(JSON.stringify(a))}return y(),(s,a)=>{const r=L,i=Y,x=G,$=E,N=H,C=K,D=U;return q(),B(D,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:n(()=>[e(r,{class:"pb-12px",justify:"space-between"},{default:n(()=>[e(J,{"last-path":"warehouse_salesman"}),e(R,{class:"max-w-500px",data:p(u).changedData.value,onPositiveClick:v},null,8,["data"])]),_:1}),e($,{columns:4,"label-placement":"left",class:"text-center",bordered:""},{default:n(()=>[e(i,{span:2,label:p(m)("warehouse.property.name")},{default:n(()=>{var t;return[_(c((t=o.value)==null?void 0:t.name),1)]}),_:1},8,["label"]),e(i,{span:2,label:p(m)("warehouse.property.status")},{default:n(()=>{var t;return[e(x,{type:p(f)[((t=o.value)==null?void 0:t.status)||"1"].type},{default:n(()=>{var l;return[_(c(p(f)[((l=o.value)==null?void 0:l.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),e(i,{span:2,label:p(m)("warehouse.property.phone")},{default:n(()=>{var t;return[e(b,{"edit-component":"NInput",data:(t=o.value)==null?void 0:t.phone,"onUpdate:data":a[0]||(a[0]=l=>d("phone",l))},null,8,["data"])]}),_:1},8,["label"]),e(i,{span:2,label:p(m)("warehouse.property.createdAt")},{default:n(()=>[_(c(h.value),1)]),_:1},8,["label"]),e(i,{span:4,label:p(m)("warehouse.property.comment")},{default:n(()=>{var t;return[e(b,{data:(t=o.value)==null?void 0:t.comment,"onUpdate:data":a[1]||(a[1]=l=>d("comment",l))},null,8,["data"])]}),_:1},8,["label"])]),_:1}),e(C,{type:"line",animated:""},{default:n(()=>[e(N,{name:"order",tab:p(m)("warehouse.order.tittle")},{default:n(()=>{var t;return[e(z,{"query-map":{salesmanId:(t=o.value)==null?void 0:t.id}},null,8,["query-map"])]}),_:1},8,["tab"])]),_:1})]),_:1})}}});export{qa as default};
