import{_ as z}from"./export-9dcc60a8.js";import{_ as V}from"./round-plus-3d7ddcc8.js";import{h as k,d as C,c as j,r as N,b8 as q,as as R,av as $,aw as a,aB as e,aC as _,ae as f,aJ as A,aK as S,aZ as D,ax as c,aW as E,bj as F,bk as J}from"./index-5bf6305f.js";import{c as B}from"./customer-dfce631f.js";import{_ as K}from"./ListTable.vue_vue_type_script_setup_true_lang-6cf305fe.js";import{N as w}from"./text-46906b8b.js";import{c as h,u as y,a as L}from"./rule-8e39ff9e.js";import{_ as W}from"./Input-1579017c.js";import{_ as Z}from"./FormItemGridItem-eef1ad88.js";import{a as G}from"./Grid-cd2c67fc.js";import{N as P}from"./Space-21ff50c5.js";import"./vuedraggable.umd-16ec35b0.js";import"./refresh-f08d53e3.js";import"./Checkbox-235a5fc1.js";import"./use-merged-state-ac77a2a7.js";import"./Popover-7d8b81d0.js";import"./Suffix-ac4d6ce4.js";import"./get-a037867f.js";import"./cssr-a4590baa.js";import"./format-length-c9d165c6.js";import"./use-compitable-c6a6c985.js";import"./next-frame-once-7035a838.js";import"./use-loading-7d95af61.js";import"./DataTable-e888694b.js";import"./Dropdown-469735b7.js";import"./Select-6bdf9184.js";import"./Tag-cb1657ff.js";const H=[{key:"name",title:"用户名",align:"center"},{key:"phone",title:"联系方式",align:"center"},{key:"address",title:"常用地址",align:"center",ellipsis:{tooltip:!0}},{key:"totalPrice",title:"订单总额",align:"center",render:u=>k(w,{},{default:()=>`€${u.totalPrice}`})},{key:"totalPaid",title:"支付总额",align:"center",render:u=>k(w,{},{default:()=>`€${u.totalPaid}`})},{key:"comment",title:"备注信息",align:"center",ellipsis:{tooltip:!0}}],O=C({__name:"AddCustomerModal",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(u,{emit:p}){const v=u,m=j({get(){return v.visible},set(r){p("update:visible",r)}}),b=()=>{m.value=!1},d=N(),o=q({}),x={name:h("请输入客户名称"),phone:h("请输入联系方式"),address:y,invoiceInfo:y,comment:y};async function s(){var t,l;await((t=d.value)==null?void 0:t.validate());const{error:r}=await B.create(o);r||((l=window.$message)==null||l.success("新增成功!"),b(),p("succeed"))}return(r,t)=>{const l=W,i=Z,g=G,T=L,U=f,I=P,M=A;return R(),$(M,{show:m.value,"onUpdate:show":t[5]||(t[5]=n=>m.value=n),preset:"card",title:"新增客户",class:"w-700px"},{default:a(()=>[e(T,{ref_key:"formRef",ref:d,class:"w-80% m-auto","label-placement":"left","label-width":150,model:o,rules:x},{default:a(()=>[e(g,{cols:12,"x-gap":18},{default:a(()=>[e(i,{span:12,label:"客户名称",path:"name"},{default:a(()=>[e(l,{value:o.name,"onUpdate:value":t[0]||(t[0]=n=>o.name=n),clearable:""},null,8,["value"])]),_:1}),e(i,{span:12,label:"联系方式",path:"phone"},{default:a(()=>[e(l,{value:o.phone,"onUpdate:value":t[1]||(t[1]=n=>o.phone=n),clearable:""},null,8,["value"])]),_:1}),e(i,{span:12,label:"常用地址",path:"address"},{default:a(()=>[e(l,{value:o.address,"onUpdate:value":t[2]||(t[2]=n=>o.address=n),clearable:""},null,8,["value"])]),_:1}),e(i,{span:12,label:"发票信息",path:"invoiceInfo"},{default:a(()=>[e(l,{value:o.invoiceInfo,"onUpdate:value":t[3]||(t[3]=n=>o.invoiceInfo=n),type:"textarea",clearable:""},null,8,["value"])]),_:1}),e(i,{span:36,label:"备注",path:"comment"},{default:a(()=>[e(l,{value:o.comment,"onUpdate:value":t[4]||(t[4]=n=>o.comment=n)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),e(I,{class:"w-full pt-16px",size:24,justify:"end"},{default:a(()=>[e(U,{class:"w-72px",type:"primary",onClick:s},{default:a(()=>[_("确定")]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ce=C({__name:"index",setup(u){const{bool:p,setTrue:v}=S(),m=N(),b=()=>{var s;return(s=m.value)==null?void 0:s.loadTableData()},d=[{key:"actions",title:"操作",align:"center",render:s=>e(P,{justify:"center"},{default:()=>[e(f,{size:"small",onClick:()=>x(s.id)},{default:()=>[_("详情")]})]})}],{routerPush:o}=D();function x(s){o({name:F("warehouse_customer-detail"),query:{id:s}})}return(s,r)=>{const t=V,l=z,i=J;return R(),$(i,{bordered:!1,class:"rounded-16px shadow-sm"},{default:a(()=>[e(K,{ref_key:"listTable",ref:m,columns:c(H),"action-columns":d,"load-data":c(B).list},{default:a(()=>[e(c(f),{size:"small",type:"primary",onClick:c(v)},{default:a(()=>[e(t,{class:"mr-4px text-20px"}),_(" 新增 ")]),_:1},8,["onClick"]),e(c(f),{size:"small",type:"success"},{default:a(()=>[e(l,{class:"mr-4px text-20px"}),_(" 导出Excel ")]),_:1})]),_:1},8,["columns","load-data"]),e(O,{visible:c(p),"onUpdate:visible":r[0]||(r[0]=g=>E(p)?p.value=g:null),onSucceed:b},null,8,["visible"])]),_:1})}}});export{Ce as default};
