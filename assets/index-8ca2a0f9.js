import{_ as q,a as z}from"./export-0edec6cc.js";import{_ as S}from"./round-plus-9ea1f9f8.js";import{q as C,d as T,c as V,g as h,bn as A,o as U,b as $,w as o,f as t,aU as _,u as m,bc as P,as as f,aW as L,aX as j,bf as E,bu as F,bv as W}from"./index-c504f951.js";import{s as B}from"./supplier-6e8efbef.js";import{_ as X}from"./ListTable.vue_vue_type_script_setup_true_lang-3459e516.js";import{N}from"./text-386bb090.js";import{c as R,u as k,a as G}from"./rule-1bad6daf.js";import{_ as H}from"./Input-a8459934.js";import{a as J}from"./Grid-1713c493.js";import{N as D}from"./Space-45b7edb9.js";import"./crud-c9b4981a.js";import"./vuedraggable.umd-9f9c900f.js";import"./refresh-21f7caa5.js";import"./Checkbox-dc3673ea.js";import"./use-merged-state-184d082d.js";import"./Popover-1b93b8ee.js";import"./Suffix-4a685509.js";import"./get-3eee0bd1.js";import"./format-length-c9d165c6.js";import"./cssr-70ddafe0.js";import"./use-compitable-3c06317e.js";import"./next-frame-once-7035a838.js";import"./useLoading-41614498.js";import"./DataTable-48ae6045.js";import"./Dropdown-5ad302b9.js";import"./Select-01f4371d.js";import"./Tag-4accb8f6.js";const K=[{key:"name",title:"名称",align:"center"},{key:"phone",title:"联系方式",align:"center"},{key:"address",title:"常用地址",align:"center",ellipsis:{tooltip:!0}},{key:"totalPrice",title:"进货总额",align:"center",render:r=>C(N,{},{default:()=>`€${r.totalPrice}`})},{key:"totalPaid",title:"支付总额",align:"center",render:r=>C(N,{},{default:()=>`€${r.totalPaid}`})},{key:"comment",title:"备注信息",align:"center",ellipsis:{tooltip:!0}}],O=T({__name:"AddSupplierModal",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(r,{emit:u}){const v=r,s=V({get(){return v.visible},set(p){u("update:visible",p)}}),c=()=>{s.value=!1},d=h(),a=A({}),b={name:R("请输入供应商名称"),phone:R("请输入联系方式"),address:k,invoiceInfo:k,comment:k};async function g(){var e,n;await((e=d.value)==null?void 0:e.validate());const{error:p}=await B.create(a);p||((n=window.$message)==null||n.success("新增成功!"),c(),u("succeed"))}return(p,e)=>{const n=H,i=q,x=J,y=G,w=f,I=D,M=L;return U(),$(M,{show:m(s),"onUpdate:show":e[5]||(e[5]=l=>P(s)?s.value=l:null),preset:"card",title:"新增供应商",class:"w-700px"},{default:o(()=>[t(y,{ref_key:"formRef",ref:d,class:"w-80% m-auto","label-placement":"left","label-width":150,model:a,rules:b},{default:o(()=>[t(x,{cols:12,"x-gap":18},{default:o(()=>[t(i,{span:12,label:"名称",path:"name"},{default:o(()=>[t(n,{value:a.name,"onUpdate:value":e[0]||(e[0]=l=>a.name=l),clearable:""},null,8,["value"])]),_:1}),t(i,{span:12,label:"联系方式",path:"phone"},{default:o(()=>[t(n,{value:a.phone,"onUpdate:value":e[1]||(e[1]=l=>a.phone=l),clearable:""},null,8,["value"])]),_:1}),t(i,{span:12,label:"地址",path:"address"},{default:o(()=>[t(n,{value:a.address,"onUpdate:value":e[2]||(e[2]=l=>a.address=l),clearable:""},null,8,["value"])]),_:1}),t(i,{span:12,label:"发票信息",path:"invoiceInfo"},{default:o(()=>[t(n,{value:a.invoiceInfo,"onUpdate:value":e[3]||(e[3]=l=>a.invoiceInfo=l),type:"textarea",clearable:""},null,8,["value"])]),_:1}),t(i,{span:36,label:"备注",path:"comment"},{default:o(()=>[t(n,{value:a.comment,"onUpdate:value":e[4]||(e[4]=l=>a.comment=l)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),t(I,{class:"w-full pt-16px",size:24,justify:"end"},{default:o(()=>[t(w,{class:"w-72px",type:"primary",onClick:g},{default:o(()=>[_("确定")]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ce=T({__name:"index",setup(r){const{bool:u,setTrue:v}=j(),s=h(),c=h([]);async function d(){const{data:e}=await B.list();e&&(c.value=e.items)}const a=()=>{var e;return(e=s.value)==null?void 0:e.loadTableData()},b=[{key:"actions",title:"操作",align:"center",render:e=>t(D,{justify:"center"},{default:()=>[t(f,{size:"small",onClick:()=>p(e.id)},{default:()=>[_("详情")]})]})}],{routerPush:g}=E();function p(e){g({name:F("warehouse_supplier-detail"),query:{id:e}})}return(e,n)=>{const i=S,x=z,y=W;return U(),$(y,{bordered:!1,class:"rounded-16px shadow-sm"},{default:o(()=>[t(X,{ref_key:"listTable",ref:s,columns:m(K),"action-columns":b,data:c.value,onLoadData:d},{default:o(()=>[t(m(f),{size:"small",type:"primary",onClick:m(v)},{default:o(()=>[t(i,{class:"mr-4px text-20px"}),_(" 新增 ")]),_:1},8,["onClick"]),t(m(f),{size:"small",type:"success"},{default:o(()=>[t(x,{class:"mr-4px text-20px"}),_(" 导出Excel ")]),_:1})]),_:1},8,["columns","data"]),t(O,{visible:m(u),"onUpdate:visible":n[0]||(n[0]=w=>P(u)?u.value=w:null),onSucceed:a},null,8,["visible"])]),_:1})}}});export{Ce as default};
