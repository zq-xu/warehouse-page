import{d as P,aY as S,r as A,c as O,as as q,av as B,aw as n,aB as e,ax as p,aD as m,aC as _,az as c,ao as I,bk as U,df as k}from"./index-d34e0519.js";import{s as f,a as F}from"./salesman-fcb1b93b.js";import{_ as J,a as R,b,s as T}from"./index.vue_vue_type_script_setup_true_lang-21655c41.js";import{d as V}from"./time-0f38da99.js";import{C as j}from"./difference-a6ec943c.js";import{s as w}from"./salesman-531bbc7f.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-b113ef98.js";import{N as L}from"./Space-b4b83a0d.js";import{_ as Y,a as E}from"./DescriptionsItem-f5b97799.js";import{_ as G}from"./Tag-1e615c64.js";import{_ as H,a as K}from"./Tabs-b311b687.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-b25c0716.js";import"./Select-ed1484d1.js";import"./use-merged-state-38e48ef5.js";import"./Suffix-82265be2.js";import"./use-compitable-c9ad10e0.js";import"./cssr-bdc68017.js";import"./Popover-7a5e5188.js";import"./get-0596a638.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./DatePicker-bc839373.js";import"./Dropdown-07d5487b.js";import"./DataTable-5dd479e1.js";import"./Checkbox-5d323e84.js";import"./Input-5a80c108.js";import"./InputNumber-f672dc0a.js";import"./Add-b172a4da.js";import"./Switch-ad10093b.js";import"./text-92e19e0a.js";import"./ListTable.vue_vue_type_script_setup_true_lang-6f3668cb.js";import"./refresh-8a8ec83d.js";import"./use-loading-f04b65e1.js";import"./vuedraggable.umd-510056e9.js";import"./Popconfirm-ab3b5a82.js";const qa=P({__name:"index",setup(M){const g=S(),o=A({}),h=O(()=>{var s,a;return k((s=o.value)==null?void 0:s.createdAt)?V((a=o.value)==null?void 0:a.createdAt):""}),u=new j;function d(s,a){const r=o.value[s];T(o.value,s,a),u.updateProp({key:s,oldValue:r,newValue:a,propOptions:F})}async function v(){var a,r;const{error:s}=await w.update(o.value.id,u.generateChangedRecord());s?(a=window.$message)==null||a.error(`${m("warehouse.common.operateFailed")} ${s.msg}`):((r=window.$message)==null||r.success(m("warehouse.common.editSuccess")),setTimeout(()=>{I().reloadPage()},500))}async function y(){var r;const s=(r=g.query)==null?void 0:r.id,{data:a}=await w.get(s);o.value=JSON.parse(JSON.stringify(a))}return y(),(s,a)=>{const r=L,i=Y,x=G,$=E,N=H,C=K,D=U;return q(),B(D,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:n(()=>[e(r,{class:"pb-12px",justify:"space-between"},{default:n(()=>[e(J,{"last-path":"warehouse_salesman"}),e(R,{class:"max-w-500px",data:p(u).changedData.value,onPositiveClick:v},null,8,["data"])]),_:1}),e($,{columns:4,"label-placement":"left",class:"text-center",bordered:""},{default:n(()=>[e(i,{span:2,label:p(m)("warehouse.property.name")},{default:n(()=>{var t;return[_(c((t=o.value)==null?void 0:t.name),1)]}),_:1},8,["label"]),e(i,{span:2,label:p(m)("warehouse.property.status")},{default:n(()=>{var t;return[e(x,{type:p(f)[((t=o.value)==null?void 0:t.status)||"1"].type},{default:n(()=>{var l;return[_(c(p(f)[((l=o.value)==null?void 0:l.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1},8,["label"]),e(i,{span:2,label:p(m)("warehouse.property.phone")},{default:n(()=>{var t;return[e(b,{"edit-component":"NInput",data:(t=o.value)==null?void 0:t.phone,"onUpdate:data":a[0]||(a[0]=l=>d("phone",l))},null,8,["data"])]}),_:1},8,["label"]),e(i,{span:2,label:p(m)("warehouse.property.createdAt")},{default:n(()=>[_(c(h.value),1)]),_:1},8,["label"]),e(i,{span:4,label:p(m)("warehouse.property.comment")},{default:n(()=>{var t;return[e(b,{data:(t=o.value)==null?void 0:t.comment,"onUpdate:data":a[1]||(a[1]=l=>d("comment",l))},null,8,["data"])]}),_:1},8,["label"])]),_:1}),e(C,{type:"line",animated:""},{default:n(()=>[e(N,{name:"order",tab:p(m)("warehouse.order.tittle")},{default:n(()=>{var t;return[e(z,{"query-map":{salesmanId:(t=o.value)==null?void 0:t.id}},null,8,["query-map"])]}),_:1},8,["tab"])]),_:1})]),_:1})}}});export{qa as default};
