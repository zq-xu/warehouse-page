import{_ as z}from"./export-9494ff81.js";import{_ as S}from"./round-plus-c1092305.js";import{h as k,d as C,c as V,r as N,b8 as j,as as R,av as $,aw as a,aB as e,aC as _,ae as f,aJ as q,aK as A,aZ as D,ax as c,aW as E,bj as F,bk as J}from"./index-d54e27e5.js";import{s as B}from"./supplier-587e01e6.js";import{_ as K}from"./ListTable.vue_vue_type_script_setup_true_lang-8a138c6f.js";import{N as w}from"./text-a2551e0f.js";import{c as h,u as y,a as L}from"./rule-9b1bb503.js";import{_ as W}from"./Input-ed39452b.js";import{_ as Z}from"./FormItemGridItem-1706a543.js";import{a as G}from"./Grid-720faae6.js";import{N as P}from"./Space-87b276b9.js";import"./vuedraggable.umd-7d530147.js";import"./refresh-5904e64e.js";import"./Checkbox-489d1cbc.js";import"./use-merged-state-3e142966.js";import"./Popover-7b0135d6.js";import"./Suffix-bd6327fa.js";import"./get-f627e15a.js";import"./cssr-66e6389d.js";import"./format-length-c9d165c6.js";import"./use-compitable-689c1d61.js";import"./next-frame-once-7035a838.js";import"./use-loading-a821e2fc.js";import"./DataTable-5a20c5e9.js";import"./Dropdown-fc098814.js";import"./Select-559fcc4a.js";import"./Tag-e65656a5.js";const H=[{key:"name",title:"名称",align:"center"},{key:"phone",title:"联系方式",align:"center"},{key:"address",title:"常用地址",align:"center",ellipsis:{tooltip:!0}},{key:"totalPrice",title:"进货总额",align:"center",render:u=>k(w,{},{default:()=>`€${u.totalPrice}`})},{key:"totalPaid",title:"支付总额",align:"center",render:u=>k(w,{},{default:()=>`€${u.totalPaid}`})},{key:"comment",title:"备注信息",align:"center",ellipsis:{tooltip:!0}}],O=C({__name:"AddSupplierModal",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(u,{emit:p}){const v=u,m=V({get(){return v.visible},set(i){p("update:visible",i)}}),b=()=>{m.value=!1},d=N(),o=j({}),x={name:h("请输入供应商名称"),phone:h("请输入联系方式"),address:y,invoiceInfo:y,comment:y};async function s(){var t,l;await((t=d.value)==null?void 0:t.validate());const{error:i}=await B.create(o);i||((l=window.$message)==null||l.success("新增成功!"),b(),p("succeed"))}return(i,t)=>{const l=W,r=Z,g=G,T=L,U=f,I=P,M=q;return R(),$(M,{show:m.value,"onUpdate:show":t[5]||(t[5]=n=>m.value=n),preset:"card",title:"新增供应商",class:"w-700px"},{default:a(()=>[e(T,{ref_key:"formRef",ref:d,class:"w-80% m-auto","label-placement":"left","label-width":150,model:o,rules:x},{default:a(()=>[e(g,{cols:12,"x-gap":18},{default:a(()=>[e(r,{span:12,label:"名称",path:"name"},{default:a(()=>[e(l,{value:o.name,"onUpdate:value":t[0]||(t[0]=n=>o.name=n),clearable:""},null,8,["value"])]),_:1}),e(r,{span:12,label:"联系方式",path:"phone"},{default:a(()=>[e(l,{value:o.phone,"onUpdate:value":t[1]||(t[1]=n=>o.phone=n),clearable:""},null,8,["value"])]),_:1}),e(r,{span:12,label:"地址",path:"address"},{default:a(()=>[e(l,{value:o.address,"onUpdate:value":t[2]||(t[2]=n=>o.address=n),clearable:""},null,8,["value"])]),_:1}),e(r,{span:12,label:"发票信息",path:"invoiceInfo"},{default:a(()=>[e(l,{value:o.invoiceInfo,"onUpdate:value":t[3]||(t[3]=n=>o.invoiceInfo=n),type:"textarea",clearable:""},null,8,["value"])]),_:1}),e(r,{span:36,label:"备注",path:"comment"},{default:a(()=>[e(l,{value:o.comment,"onUpdate:value":t[4]||(t[4]=n=>o.comment=n)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),e(I,{class:"w-full pt-16px",size:24,justify:"end"},{default:a(()=>[e(U,{class:"w-72px",type:"primary",onClick:s},{default:a(()=>[_("确定")]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ce=C({__name:"index",setup(u){const{bool:p,setTrue:v}=A(),m=N(),b=()=>{var s;return(s=m.value)==null?void 0:s.loadTableData()},d=[{key:"actions",title:"操作",align:"center",render:s=>e(P,{justify:"center"},{default:()=>[e(f,{size:"small",onClick:()=>x(s.id)},{default:()=>[_("详情")]})]})}],{routerPush:o}=D();function x(s){o({name:F("warehouse_supplier-detail"),query:{id:s}})}return(s,i)=>{const t=S,l=z,r=J;return R(),$(r,{bordered:!1,class:"rounded-16px shadow-sm"},{default:a(()=>[e(K,{ref_key:"listTable",ref:m,columns:c(H),"action-columns":d,"load-data":c(B).list},{default:a(()=>[e(c(f),{size:"small",type:"primary",onClick:c(v)},{default:a(()=>[e(t,{class:"mr-4px text-20px"}),_(" 新增 ")]),_:1},8,["onClick"]),e(c(f),{size:"small",type:"success"},{default:a(()=>[e(l,{class:"mr-4px text-20px"}),_(" 导出Excel ")]),_:1})]),_:1},8,["columns","load-data"]),e(O,{visible:c(p),"onUpdate:visible":i[0]||(i[0]=g=>E(p)?p.value=g:null),onSucceed:b},null,8,["visible"])]),_:1})}}});export{Ce as default};
