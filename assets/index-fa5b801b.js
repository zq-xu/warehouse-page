import{_ as q,a as z}from"./export-3f879fb8.js";import{_ as V}from"./round-plus-d894c800.js";import{q as C,d as T,c as A,g as h,bn as L,o as U,b as $,w as a,f as t,aU as _,u as m,bc as P,as as f,aW as S,aX as j,bf as E,bu as F,bv as W}from"./index-74b62da3.js";import{c as B}from"./customer-0d5a178c.js";import{_ as X}from"./ListTable.vue_vue_type_script_setup_true_lang-79645fb5.js";import{N}from"./text-20a1556e.js";import{c as R,u as k,a as G}from"./rule-cdc35dc7.js";import{_ as H}from"./Input-bd51c514.js";import{a as J}from"./Grid-abfe9472.js";import{N as D}from"./Space-4e03680c.js";import"./crud-c9b4981a.js";import"./vuedraggable.umd-6f97032d.js";import"./refresh-ba31b930.js";import"./Checkbox-4778377f.js";import"./use-merged-state-d7f3d663.js";import"./Popover-04d9f1d4.js";import"./Suffix-d9748048.js";import"./get-bba73765.js";import"./format-length-c9d165c6.js";import"./cssr-151c23e3.js";import"./use-compitable-b5efc101.js";import"./next-frame-once-7035a838.js";import"./useLoading-f21cce98.js";import"./DataTable-4e997df8.js";import"./Dropdown-089a5a89.js";import"./Select-4c7f9396.js";import"./Tag-dded2254.js";const K=[{key:"name",title:"用户名",align:"center"},{key:"phone",title:"联系方式",align:"center"},{key:"address",title:"常用地址",align:"center",ellipsis:{tooltip:!0}},{key:"totalPrice",title:"订单总额",align:"center",render:r=>C(N,{},{default:()=>`€${r.totalPrice}`})},{key:"totalPaid",title:"支付总额",align:"center",render:r=>C(N,{},{default:()=>`€${r.totalPaid}`})},{key:"comment",title:"备注信息",align:"center",ellipsis:{tooltip:!0}}],O=T({__name:"AddCustomerModal",props:{visible:{type:Boolean}},emits:["update:visible","succeed"],setup(r,{emit:u}){const v=r,s=A({get(){return v.visible},set(p){u("update:visible",p)}}),c=()=>{s.value=!1},d=h(),o=L({}),b={name:R("请输入客户名称"),phone:R("请输入联系方式"),address:k,invoiceInfo:k,comment:k};async function g(){var e,n;await((e=d.value)==null?void 0:e.validate());const{error:p}=await B.create(o);p||((n=window.$message)==null||n.success("新增成功!"),c(),u("succeed"))}return(p,e)=>{const n=H,i=q,x=J,y=G,w=f,I=D,M=S;return U(),$(M,{show:m(s),"onUpdate:show":e[5]||(e[5]=l=>P(s)?s.value=l:null),preset:"card",title:"新增客户",class:"w-700px"},{default:a(()=>[t(y,{ref_key:"formRef",ref:d,class:"w-80% m-auto","label-placement":"left","label-width":150,model:o,rules:b},{default:a(()=>[t(x,{cols:12,"x-gap":18},{default:a(()=>[t(i,{span:12,label:"客户名称",path:"name"},{default:a(()=>[t(n,{value:o.name,"onUpdate:value":e[0]||(e[0]=l=>o.name=l),clearable:""},null,8,["value"])]),_:1}),t(i,{span:12,label:"联系方式",path:"phone"},{default:a(()=>[t(n,{value:o.phone,"onUpdate:value":e[1]||(e[1]=l=>o.phone=l),clearable:""},null,8,["value"])]),_:1}),t(i,{span:12,label:"常用地址",path:"address"},{default:a(()=>[t(n,{value:o.address,"onUpdate:value":e[2]||(e[2]=l=>o.address=l),clearable:""},null,8,["value"])]),_:1}),t(i,{span:12,label:"发票信息",path:"invoiceInfo"},{default:a(()=>[t(n,{value:o.invoiceInfo,"onUpdate:value":e[3]||(e[3]=l=>o.invoiceInfo=l),type:"textarea",clearable:""},null,8,["value"])]),_:1}),t(i,{span:36,label:"备注",path:"comment"},{default:a(()=>[t(n,{value:o.comment,"onUpdate:value":e[4]||(e[4]=l=>o.comment=l)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"]),t(I,{class:"w-full pt-16px",size:24,justify:"end"},{default:a(()=>[t(w,{class:"w-72px",type:"primary",onClick:g},{default:a(()=>[_("确定")]),_:1})]),_:1})]),_:1},8,["show"])}}}),Ce=T({__name:"index",setup(r){const{bool:u,setTrue:v}=j(),s=h(),c=h([]);async function d(){const{data:e}=await B.list();e&&(c.value=e.items)}const o=()=>{var e;return(e=s.value)==null?void 0:e.loadTableData()},b=[{key:"actions",title:"操作",align:"center",render:e=>t(D,{justify:"center"},{default:()=>[t(f,{size:"small",onClick:()=>p(e.id)},{default:()=>[_("详情")]})]})}],{routerPush:g}=E();function p(e){g({name:F("warehouse_customer-detail"),query:{id:e}})}return(e,n)=>{const i=V,x=z,y=W;return U(),$(y,{bordered:!1,class:"rounded-16px shadow-sm"},{default:a(()=>[t(X,{ref_key:"listTable",ref:s,columns:m(K),"action-columns":b,data:c.value,onLoadData:d},{default:a(()=>[t(m(f),{size:"small",type:"primary",onClick:m(v)},{default:a(()=>[t(i,{class:"mr-4px text-20px"}),_(" 新增 ")]),_:1},8,["onClick"]),t(m(f),{size:"small",type:"success"},{default:a(()=>[t(x,{class:"mr-4px text-20px"}),_(" 导出Excel ")]),_:1})]),_:1},8,["columns","data"]),t(O,{visible:m(u),"onUpdate:visible":n[0]||(n[0]=w=>P(u)?u.value=w:null),onSucceed:o},null,8,["visible"])]),_:1})}}});export{Ce as default};
