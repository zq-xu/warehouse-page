import{_ as A,a as d,s as O,b as T}from"./index.vue_vue_type_script_setup_true_lang-c0bb831c.js";import{d as U,bf as k,be as q,g as B,c as I,db as R,o as j,b as J,w as o,f as a,u as i,as as L,aU as l,aT as u,bu as V,j as F,bv as z}from"./index-8daa1557.js";import{d as E}from"./SearchableSelect.vue_vue_type_script_setup_true_lang-92c79cec.js";import{C as G}from"./difference-5f2164a9.js";import{s as f,a as H}from"./salesman-761844d1.js";import{s as b}from"./salesman-58f2b5d2.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-c56555d8.js";import{N as M}from"./Space-40c3b44e.js";import{_ as Q,a as W}from"./DescriptionsItem-87ac5814.js";import{_ as X}from"./Tag-656ba6f9.js";import{_ as Y,a as Z}from"./Tabs-51cde282.js";import"./Input-b5609ef7.js";import"./Suffix-cff3ef6f.js";import"./use-merged-state-3569f73f.js";import"./InputNumber-d9da7e3d.js";import"./Add-ddf47f49.js";import"./Select-ec81b3d5.js";import"./use-compitable-aee246b5.js";import"./cssr-b450591b.js";import"./Popover-62d545d9.js";import"./get-d43742d2.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./Switch-3a154844.js";import"./Checkbox-b9b1a3a5.js";import"./text-5e02abb0.js";import"./DataTable-9a0c077d.js";import"./Dropdown-6227f8d6.js";import"./Popconfirm-4d81e7e4.js";import"./crud-c9b4981a.js";import"./order-62ec8b7b.js";import"./ListTable.vue_vue_type_script_setup_true_lang-44a63c9e.js";import"./vuedraggable.umd-02d54b02.js";import"./refresh-9639090c.js";import"./useLoading-923511a2.js";const Ia=U({__name:"index",setup(aa){const{routerPush:g}=k();function v(){g({name:V("warehouse_salesman")})}const w=q(),n=B({}),h=I(()=>{var s,t;return R((s=n.value)==null?void 0:s.createdAt)?E((t=n.value)==null?void 0:t.createdAt):""}),_=new G;function c(s,t){const p=n.value[s];O(n.value,s,t),_.updateProp({key:s,oldValue:p,newValue:t,propOptions:H})}async function y(){var t,p;const{error:s}=await b.update(n.value.id,_.generateChangedRecord());s?(t=window.$message)==null||t.error(`操作失败! ${s.msg}`):((p=window.$message)==null||p.success("修改成功!"),setTimeout(()=>{F().reloadPage()},500))}async function x(){var p;const s=(p=w.query)==null?void 0:p.id,{data:t}=await b.get(s);n.value=JSON.parse(JSON.stringify(t))}return x(),(s,t)=>{const p=T,N=M,m=Q,P=X,C=W,$=Y,D=Z,S=z;return j(),J(S,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:o(()=>[a(N,{class:"pb-12px",justify:"space-between"},{default:o(()=>[a(i(L),{onClick:v},{icon:o(()=>[a(p)]),default:o(()=>[l("返回 ")]),_:1}),a(A,{class:"max-w-500px",data:i(_).changedData.value,onPositiveClick:y},null,8,["data"])]),_:1}),a(C,{columns:4,"label-placement":"left",class:"text-center",bordered:""},{default:o(()=>[a(m,{span:2,label:"名称"},{default:o(()=>{var e;return[l(u((e=n.value)==null?void 0:e.name),1)]}),_:1}),a(m,{span:2,label:"状态"},{default:o(()=>{var e;return[a(P,{type:i(f)[((e=n.value)==null?void 0:e.status)||"1"].type},{default:o(()=>{var r;return[l(u(i(f)[((r=n.value)==null?void 0:r.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1}),a(m,{span:2,label:"联系方式"},{default:o(()=>{var e;return[a(d,{"edit-component":"NInput",data:(e=n.value)==null?void 0:e.phone,"onUpdate:data":t[0]||(t[0]=r=>c("phone",r))},null,8,["data"])]}),_:1}),a(m,{span:2,label:"创建时间"},{default:o(()=>[l(u(i(h)),1)]),_:1}),a(m,{span:4,label:"备注信息"},{default:o(()=>{var e;return[a(d,{data:(e=n.value)==null?void 0:e.comment,"onUpdate:data":t[1]||(t[1]=r=>c("comment",r))},null,8,["data"])]}),_:1})]),_:1}),a(D,{type:"line",animated:""},{default:o(()=>[a($,{name:"order",tab:"订单信息"},{default:o(()=>{var e;return[a(K,{"query-map":{salesmanId:(e=n.value)==null?void 0:e.id}},null,8,["query-map"])]}),_:1})]),_:1})]),_:1})}}});export{Ia as default};
