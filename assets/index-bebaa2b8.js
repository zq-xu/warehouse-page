import{d as P,aY as D,r as S,c as A,as as O,av as q,aw as s,aB as t,ax as i,aC as _,az as u,ao as B,bk as I,df as U}from"./index-5bf6305f.js";import{s as c,a as k}from"./salesman-761844d1.js";import{_ as J,a as R,b as f,s as T}from"./index.vue_vue_type_script_setup_true_lang-4df5b8a3.js";import{d as V}from"./time-3d6c5d3a.js";import{C as j}from"./difference-e6cbcb59.js";import{s as g}from"./salesman-e0f34a56.js";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-245ce67d.js";import{N as F}from"./Space-21ff50c5.js";import{_ as L,a as Y}from"./DescriptionsItem-381d7e9b.js";import{_ as E}from"./Tag-cb1657ff.js";import{_ as G,a as H}from"./Tabs-a76dc4cd.js";import"./SearchableSelect.vue_vue_type_script_setup_true_lang-a3fb411b.js";import"./Select-6bdf9184.js";import"./use-merged-state-ac77a2a7.js";import"./Suffix-ac4d6ce4.js";import"./use-compitable-c6a6c985.js";import"./cssr-a4590baa.js";import"./Popover-7d8b81d0.js";import"./get-a037867f.js";import"./format-length-c9d165c6.js";import"./next-frame-once-7035a838.js";import"./DatePicker-58c07081.js";import"./Dropdown-469735b7.js";import"./DataTable-e888694b.js";import"./Checkbox-235a5fc1.js";import"./Input-1579017c.js";import"./InputNumber-766f9687.js";import"./Add-51e908eb.js";import"./Switch-fc8f5e8a.js";import"./text-46906b8b.js";import"./Popconfirm-c4e866a6.js";import"./ListTable.vue_vue_type_script_setup_true_lang-6cf305fe.js";import"./vuedraggable.umd-16ec35b0.js";import"./refresh-f08d53e3.js";import"./use-loading-7d95af61.js";const Oa=P({__name:"index",setup(K){const b=D(),o=S({}),v=A(()=>{var n,a;return U((n=o.value)==null?void 0:n.createdAt)?V((a=o.value)==null?void 0:a.createdAt):""}),l=new j;function d(n,a){const p=o.value[n];T(o.value,n,a),l.updateProp({key:n,oldValue:p,newValue:a,propOptions:k})}async function w(){var a,p;const{error:n}=await g.update(o.value.id,l.generateChangedRecord());n?(a=window.$message)==null||a.error(`操作失败! ${n.msg}`):((p=window.$message)==null||p.success("修改成功!"),setTimeout(()=>{B().reloadPage()},500))}async function x(){var p;const n=(p=b.query)==null?void 0:p.id,{data:a}=await g.get(n);o.value=JSON.parse(JSON.stringify(a))}return x(),(n,a)=>{const p=F,m=L,y=E,h=Y,N=G,$=H,C=I;return O(),q(C,{bordered:!1,class:"h-full rounded-16px shadow-sm"},{default:s(()=>[t(p,{class:"pb-12px",justify:"space-between"},{default:s(()=>[t(J,{"last-path":"warehouse_salesman"}),t(R,{class:"max-w-500px",data:i(l).changedData.value,onPositiveClick:w},null,8,["data"])]),_:1}),t(h,{columns:4,"label-placement":"left",class:"text-center",bordered:""},{default:s(()=>[t(m,{span:2,label:"名称"},{default:s(()=>{var e;return[_(u((e=o.value)==null?void 0:e.name),1)]}),_:1}),t(m,{span:2,label:"状态"},{default:s(()=>{var e;return[t(y,{type:i(c)[((e=o.value)==null?void 0:e.status)||"1"].type},{default:s(()=>{var r;return[_(u(i(c)[((r=o.value)==null?void 0:r.status)||"1"].label),1)]}),_:1},8,["type"])]}),_:1}),t(m,{span:2,label:"联系方式"},{default:s(()=>{var e;return[t(f,{"edit-component":"NInput",data:(e=o.value)==null?void 0:e.phone,"onUpdate:data":a[0]||(a[0]=r=>d("phone",r))},null,8,["data"])]}),_:1}),t(m,{span:2,label:"创建时间"},{default:s(()=>[_(u(v.value),1)]),_:1}),t(m,{span:4,label:"备注信息"},{default:s(()=>{var e;return[t(f,{data:(e=o.value)==null?void 0:e.comment,"onUpdate:data":a[1]||(a[1]=r=>d("comment",r))},null,8,["data"])]}),_:1})]),_:1}),t($,{type:"line",animated:""},{default:s(()=>[t(N,{name:"order",tab:"订单信息"},{default:s(()=>{var e;return[t(z,{"query-map":{salesmanId:(e=o.value)==null?void 0:e.id}},null,8,["query-map"])]}),_:1})]),_:1})]),_:1})}}});export{Oa as default};
